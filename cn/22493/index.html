<!DOCTYPE html><html lang="[&quot;en&quot;,&quot;cn&quot;]" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Python 康复训练 | Lave's Cabin</title><meta name="author" content="Lave"><meta name="copyright" content="Lave"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffa3bD"><meta name="description" content="Python 复习重温笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="Python 康复训练">
<meta property="og:url" content="http://lave.fun/cn/22493/">
<meta property="og:site_name" content="Lave&#39;s Cabin">
<meta property="og:description" content="Python 复习重温笔记">
<meta property="og:locale">
<meta property="og:image" content="https://www.python.org/static/img/python-logo.png">
<meta property="article:published_time" content="2025-03-06T03:47:08.000Z">
<meta property="article:modified_time" content="2025-03-06T03:47:08.000Z">
<meta property="article:author" content="Lave">
<meta property="article:tag" content="笔记">
<meta property="article:tag" content="学习">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.python.org/static/img/python-logo.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://lave.fun/cn/22493/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        if (name && globalFn[key][name]) return
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#430311')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffa3bD')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')
          
          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=[object Object]"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', '[object Object]')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', '[object Object]', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":250,"languages":{"author":"Author: Lave","link":"Link: ","source":"Source: Lave's Cabin","info":"Copyright belongs to the author. For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Python 康复训练',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-03-06 11:47:08'
}</script><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Lave's Cabin" type="application/rss+xml">
</head><body><div id="web_bg" style="background-image: url(img/topImg.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "/img/Loading.png" data-lazy-src="/img/LavesCabin.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">43</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">30</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">10</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/bio/"><i class="fa-fw fa-solid fa-id-card"></i><span> 名片</span></a></div><div class="menus_item"><a class="site-page" href="/v/"><i class="fa-fw fas fa-terminal"></i><span> 终端</span></a></div><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-newspaper"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 类别</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-sitemap"></i><span> 本站</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/old/"><i class="fa-fw fa-regular fa-window-restore"></i><span> 旧版</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa-brands fa-rocketchat"></i><span> 说说</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 图册</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fa-solid fa-bus"></i><span> 开往</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-language"></i><span> Lang</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/cn/"><span> 中文</span></a></li><li><a class="site-page child" href="/en/"><span> English</span></a></li><li><a class="site-page child" href="/"><span> Global</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(https://www.python.org/static/img/python-logo.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src= "/img/Loading.png" data-lazy-src="/img/logo.png" alt="Logo"><span class="site-name">Lave's Cabin</span></a><a class="nav-page-title" href="/"><span class="site-name">Python 康复训练</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/bio/"><i class="fa-fw fa-solid fa-id-card"></i><span> 名片</span></a></div><div class="menus_item"><a class="site-page" href="/v/"><i class="fa-fw fas fa-terminal"></i><span> 终端</span></a></div><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-newspaper"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 类别</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-sitemap"></i><span> 本站</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/old/"><i class="fa-fw fa-regular fa-window-restore"></i><span> 旧版</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa-brands fa-rocketchat"></i><span> 说说</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 图册</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fa-solid fa-bus"></i><span> 开往</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-language"></i><span> Lang</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/cn/"><span> 中文</span></a></li><li><a class="site-page child" href="/en/"><span> English</span></a></li><li><a class="site-page child" href="/"><span> Global</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Python 康复训练</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-03-06T03:47:08.000Z" title="发表于 2025-03-06 11:47:08">2025-03-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-03-06T03:47:08.000Z" title="更新于 2025-03-06 11:47:08">2025-03-06</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">13.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>66分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a class="disqus-comment-count" href="http://lave.fun/cn/22493/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Python的康复训练"><a href="#Python的康复训练" class="headerlink" title="Python的康复训练"></a><strong>Python的康复训练</strong></h1><blockquote>
<p>长时间没写 Python，直接让 Claude跑了篇康复训练笔记给我 XD</p>
</blockquote>
<h1 id="第一章：Python基础语法"><a href="#第一章：Python基础语法" class="headerlink" title="第一章：Python基础语法"></a><strong>第一章：Python基础语法</strong></h1><p>本章主要介绍Python语言的基本语法。熟悉这些基础知识是进行任何编程活动的前提。</p>
<h2 id="1-1-变量与数据类型"><a href="#1-1-变量与数据类型" class="headerlink" title="1.1 变量与数据类型"></a><strong>1.1 变量与数据类型</strong></h2><p>在Python中，变量是存储数据的容器。Python是动态类型语言，这意味着我们不需要显式声明变量的类型。</p>
<h3 id="各数据类型对比"><a href="#各数据类型对比" class="headerlink" title="各数据类型对比"></a><strong>各数据类型对比</strong></h3><table>
<thead>
<tr>
<th>数据类型</th>
<th>存储结构</th>
<th>是否有序</th>
<th>是否可变</th>
<th>是否允许重复</th>
<th>查找速度</th>
<th>插入&#x2F;删除速度</th>
<th>适用场景</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>list</code>（列表）</strong></td>
<td>动态数组</td>
<td>✅ 有序</td>
<td>✅ 可变</td>
<td>✅ 允许</td>
<td>O(n)（线性搜索）</td>
<td>末尾 O(1)，中间 O(n)</td>
<td>需要动态存储有序数据</td>
</tr>
<tr>
<td><strong><code>tuple</code>（元组）</strong></td>
<td>动态数组</td>
<td>✅ 有序</td>
<td>❌ 不可变</td>
<td>✅ 允许</td>
<td>O(n)</td>
<td>❌ 不可修改</td>
<td>需要不可变数据，如字典键</td>
</tr>
<tr>
<td><strong><code>dict</code>（字典）</strong></td>
<td>哈希表</td>
<td>✅ 有序 (Python 3.7+)</td>
<td>✅ 可变</td>
<td>✅ 允许</td>
<td>O(1)</td>
<td>O(1)</td>
<td>需要键值映射的查找表</td>
</tr>
<tr>
<td><strong><code>set</code>（集合）</strong></td>
<td>哈希表</td>
<td>❌ 无序</td>
<td>✅ 可变</td>
<td>❌ 不允许</td>
<td>O(1)</td>
<td>O(1)</td>
<td>需要去重或集合运算</td>
</tr>
<tr>
<td><strong><code>str</code>（字符串）</strong></td>
<td>动态数组</td>
<td>✅ 有序</td>
<td>❌ 不可变</td>
<td>✅ 允许</td>
<td>O(n)</td>
<td>❌ 不可修改</td>
<td>处理文本数据</td>
</tr>
</tbody></table>
<h3 id="数据类型选择指南"><a href="#数据类型选择指南" class="headerlink" title="数据类型选择指南"></a><strong>数据类型选择指南</strong></h3><table>
<thead>
<tr>
<th>需求</th>
<th>推荐数据类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>快速查找键值</strong></td>
<td><code>dict</code></td>
<td>O(1) 查找速度</td>
</tr>
<tr>
<td><strong>存储唯一值</strong></td>
<td><code>set</code></td>
<td>自动去重，O(1) 查找</td>
</tr>
<tr>
<td><strong>存储有序列表</strong></td>
<td><code>list</code></td>
<td>可变，支持索引</td>
</tr>
<tr>
<td><strong>存储不可变数据</strong></td>
<td><code>tuple</code></td>
<td>节省内存，可作 <code>dict</code> 键</td>
</tr>
<tr>
<td><strong>存储文本</strong></td>
<td><code>str</code></td>
<td>不可变，可作为 <code>dict</code> 键</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>适用场景</th>
</tr>
</thead>
<tbody><tr>
<td><code>list</code></td>
<td>需要存储有序数据，适合增删改</td>
</tr>
<tr>
<td><code>tuple</code></td>
<td>需要不可变数据，适合作为 <code>dict</code> 键</td>
</tr>
<tr>
<td><code>dict</code></td>
<td>需要键值映射，适合快速查找</td>
</tr>
<tr>
<td><code>set</code></td>
<td>需要去重或集合运算</td>
</tr>
<tr>
<td><code>str</code></td>
<td>需要存储文本，适合索引操作</td>
</tr>
</tbody></table>
<h3 id="1-1-1-基本数据类型"><a href="#1-1-1-基本数据类型" class="headerlink" title="1.1.1 基本数据类型"></a><strong>1.1.1 基本数据类型</strong></h3><ol>
<li><strong>整数(int)</strong></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">5</span>  <span class="comment"># 普通整数</span></span><br><span class="line">b = <span class="number">0b1010</span>  <span class="comment"># 二进制数，值为10</span></span><br><span class="line">c = <span class="number">0o12</span>  <span class="comment"># 八进制数，值为10</span></span><br><span class="line">d = <span class="number">0xA</span>  <span class="comment"># 十六进制数，值为10</span></span><br><span class="line">big_num = <span class="number">1_000_000</span>  <span class="comment"># 使用下划线使大数更易读</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>浮点数(float)</strong></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pi = <span class="number">3.14159</span></span><br><span class="line">e = <span class="number">2.71828</span></span><br><span class="line">scientific = <span class="number">3.14e-10</span>  <span class="comment"># 科学计数法</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>字符串(str)</strong></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串可以用单引号或双引号</span></span><br><span class="line">name = <span class="string">&quot;Python&quot;</span></span><br><span class="line">message = <span class="string">&#x27;Hello, World!&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多行字符串使用三引号</span></span><br><span class="line">multi_line = <span class="string">&quot;&quot;&quot;这是第一行</span></span><br><span class="line"><span class="string">这是第二行</span></span><br><span class="line"><span class="string">这是第三行&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串格式化</span></span><br><span class="line">name = <span class="string">&quot;Alice&quot;</span></span><br><span class="line">age = <span class="number">25</span></span><br><span class="line"><span class="comment"># f-string (推荐)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;My name is <span class="subst">&#123;name&#125;</span> and I am <span class="subst">&#123;age&#125;</span> years old&quot;</span>)</span><br><span class="line"><span class="comment"># format方法</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;My name is &#123;&#125; and I am &#123;&#125; years old&quot;</span>.<span class="built_in">format</span>(name, age))</span><br><span class="line"><span class="comment"># %操作符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;My name is %s and I am %d years old&quot;</span> % (name, age))</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><strong>布尔值(bool)</strong></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">is_active = <span class="literal">True</span></span><br><span class="line">is_empty = <span class="literal">False</span></span><br><span class="line"><span class="comment"># 布尔运算</span></span><br><span class="line"><span class="built_in">print</span>(<span class="literal">True</span> <span class="keyword">and</span> <span class="literal">False</span>)  <span class="comment"># False</span></span><br><span class="line"><span class="built_in">print</span>(<span class="literal">True</span> <span class="keyword">or</span> <span class="literal">False</span>)   <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="keyword">not</span> <span class="literal">True</span>)        <span class="comment"># False</span></span><br></pre></td></tr></table></figure>

<h3 id="1-1-2-类型转换"><a href="#1-1-2-类型转换" class="headerlink" title="1.1.2 类型转换"></a><strong>1.1.2 类型转换</strong></h3><p>Python提供了多种类型转换函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串转换</span></span><br><span class="line">str_num = <span class="string">&quot;123&quot;</span></span><br><span class="line">num = <span class="built_in">int</span>(str_num)      <span class="comment"># 字符串转整数: 123</span></span><br><span class="line">float_num = <span class="built_in">float</span>(str_num)  <span class="comment"># 字符串转浮点数: 123.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数字转字符串</span></span><br><span class="line">num = <span class="number">123</span></span><br><span class="line">str_num = <span class="built_in">str</span>(num)      <span class="comment"># 数字转字符串: &quot;123&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查数据类型</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="number">123</span>))        <span class="comment"># &lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="string">&quot;hello&quot;</span>))    <span class="comment"># &lt;class &#x27;str&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="number">3.14</span>))       <span class="comment"># &lt;class &#x27;float&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="literal">True</span>))       <span class="comment"># &lt;class &#x27;bool&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 类型判断</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(<span class="number">123</span>, <span class="built_in">int</span>))        <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(<span class="string">&quot;hello&quot;</span>, <span class="built_in">str</span>))    <span class="comment"># True</span></span><br></pre></td></tr></table></figure>

<h3 id="1-1-3-变量命名规则"><a href="#1-1-3-变量命名规则" class="headerlink" title="1.1.3 变量命名规则"></a><strong>1.1.3 变量命名规则</strong></h3><ol>
<li>变量名只能包含字母、数字和下划线</li>
<li>变量名必须以字母或下划线开头</li>
<li>变量名区分大小写</li>
<li>不能使用Python关键字</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 正确的命名</span></span><br><span class="line">user_name = <span class="string">&quot;Alice&quot;</span></span><br><span class="line">age1 = <span class="number">25</span></span><br><span class="line">_private = <span class="string">&quot;private variable&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 错误的命名</span></span><br><span class="line"><span class="comment"># 2name = &quot;John&quot;    # 不能以数字开头</span></span><br><span class="line"><span class="comment"># my-name = &quot;Bob&quot;   # 不能使用连字符</span></span><br><span class="line"><span class="comment"># class = &quot;Python&quot;  # 不能使用关键字</span></span><br></pre></td></tr></table></figure>

<h2 id="1-2-数据结构"><a href="#1-2-数据结构" class="headerlink" title="1.2 数据结构"></a><strong>1.2 数据结构</strong></h2><p>Python内置了丰富的数据结构，每种数据结构都有其特定的使用场景和优势。</p>
<h3 id="1-2-1-列表-List"><a href="#1-2-1-列表-List" class="headerlink" title="1.2.1 列表(List)"></a><strong>1.2.1 列表(List)</strong></h3><p>列表是Python中最常用的数据结构之一，它是一个可变的、有序的元素集合。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建列表</span></span><br><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">mixed = [<span class="number">1</span>, <span class="string">&quot;hello&quot;</span>, <span class="number">3.14</span>, <span class="literal">True</span>]  <span class="comment"># 列表可以包含不同类型的元素</span></span><br><span class="line">empty_list = []  <span class="comment"># 空列表</span></span><br><span class="line">list_from_range = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">5</span>))  <span class="comment"># 使用range创建列表: [0, 1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表索引和切片</span></span><br><span class="line">lst = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>]</span><br><span class="line"><span class="built_in">print</span>(lst[<span class="number">0</span>])       <span class="comment"># 第一个元素: 10</span></span><br><span class="line"><span class="built_in">print</span>(lst[-<span class="number">1</span>])      <span class="comment"># 最后一个元素: 50</span></span><br><span class="line"><span class="built_in">print</span>(lst[<span class="number">1</span>:<span class="number">3</span>])     <span class="comment"># 切片，获取索引1到2的元素: [20, 30]</span></span><br><span class="line"><span class="built_in">print</span>(lst[::<span class="number">2</span>])     <span class="comment"># 步长为2: [10, 30, 50]</span></span><br><span class="line"><span class="built_in">print</span>(lst[::-<span class="number">1</span>])    <span class="comment"># 反转列表: [50, 40, 30, 20, 10]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表常用方法</span></span><br><span class="line">lst = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">lst.append(<span class="number">4</span>)        <span class="comment"># 添加元素到末尾: [1, 2, 3, 4]</span></span><br><span class="line">lst.insert(<span class="number">1</span>, <span class="number">5</span>)     <span class="comment"># 在索引1处插入5: [1, 5, 2, 3, 4]</span></span><br><span class="line">lst.extend([<span class="number">6</span>, <span class="number">7</span>])   <span class="comment"># 扩展列表: [1, 5, 2, 3, 4, 6, 7]</span></span><br><span class="line">lst.remove(<span class="number">5</span>)        <span class="comment"># 删除第一个值为5的元素</span></span><br><span class="line">popped = lst.pop()   <span class="comment"># 移除并返回最后一个元素</span></span><br><span class="line">lst.sort()           <span class="comment"># 排序（原地排序）</span></span><br><span class="line">lst.reverse()        <span class="comment"># 反转列表</span></span><br><span class="line">index = lst.index(<span class="number">3</span>) <span class="comment"># 获取元素3的索引</span></span><br><span class="line">count = lst.count(<span class="number">2</span>) <span class="comment"># 计算元素2出现的次数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表推导式</span></span><br><span class="line">squares = [x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]              <span class="comment"># [0, 1, 4, 9, 16]</span></span><br><span class="line">evens = [x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span>]    <span class="comment"># [0, 2, 4, 6, 8]</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-2-元组-Tuple"><a href="#1-2-2-元组-Tuple" class="headerlink" title="1.2.2 元组(Tuple)"></a><strong>1.2.2 元组(Tuple)</strong></h3><p>元组是不可变的序列类型，一旦创建就不能修改。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建元组</span></span><br><span class="line">point = (<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">single_element = (<span class="number">1</span>,)  <span class="comment"># 单元素元组必须加逗号</span></span><br><span class="line">empty_tuple = ()</span><br><span class="line">tuple_from_list = <span class="built_in">tuple</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 元组解包</span></span><br><span class="line">x, y = point  <span class="comment"># x=3, y=4</span></span><br><span class="line">a, *rest, b = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)  <span class="comment"># a=1, rest=[2,3,4], b=5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 元组操作</span></span><br><span class="line">coordinates = (<span class="number">1</span>, <span class="number">2</span>) + (<span class="number">3</span>, <span class="number">4</span>)  <span class="comment"># 连接元组: (1, 2, 3, 4)</span></span><br><span class="line">repeated = (<span class="number">1</span>, <span class="number">2</span>) * <span class="number">3</span>          <span class="comment"># 重复元组: (1, 2, 1, 2, 1, 2)</span></span><br><span class="line">exists = <span class="number">3</span> <span class="keyword">in</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)        <span class="comment"># 成员检测: True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 元组方法</span></span><br><span class="line">tup = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">count = tup.count(<span class="number">2</span>)    <span class="comment"># 计数：2出现了2次</span></span><br><span class="line">index = tup.index(<span class="number">3</span>)    <span class="comment"># 获取3的索引：3</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-3-集合-Set"><a href="#1-2-3-集合-Set" class="headerlink" title="1.2.3 集合(Set)"></a><strong>1.2.3 集合(Set)</strong></h3><p>集合是无序的、不重复元素的集合，支持数学运算。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建集合</span></span><br><span class="line">numbers = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">set_from_list = <span class="built_in">set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>])  <span class="comment"># 重复元素会被去除</span></span><br><span class="line">empty_set = <span class="built_in">set</span>()  <span class="comment"># 注意：&#123;&#125;创建的是空字典，不是空集合</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 集合操作</span></span><br><span class="line">s1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">s2 = &#123;<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(s1 | s2)     <span class="comment"># 并集: &#123;1, 2, 3, 4, 5&#125;</span></span><br><span class="line"><span class="built_in">print</span>(s1 &amp; s2)     <span class="comment"># 交集: &#123;3&#125;</span></span><br><span class="line"><span class="built_in">print</span>(s1 - s2)     <span class="comment"># 差集: &#123;1, 2&#125;</span></span><br><span class="line"><span class="built_in">print</span>(s1 ^ s2)     <span class="comment"># 对称差集: &#123;1, 2, 4, 5&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 集合方法</span></span><br><span class="line">s = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">s.add(<span class="number">4</span>)           <span class="comment"># 添加单个元素</span></span><br><span class="line">s.update([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])<span class="comment"># 添加多个元素</span></span><br><span class="line">s.remove(<span class="number">4</span>)        <span class="comment"># 删除元素（元素不存在会报错）</span></span><br><span class="line">s.discard(<span class="number">4</span>)       <span class="comment"># 删除元素（元素不存在不会报错）</span></span><br><span class="line">popped = s.pop()   <span class="comment"># 随机移除并返回一个元素</span></span><br><span class="line">s.clear()          <span class="comment"># 清空集合</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-4-字典-Dictionary"><a href="#1-2-4-字典-Dictionary" class="headerlink" title="1.2.4 字典(Dictionary)"></a><strong>1.2.4 字典(Dictionary)</strong></h3><p>字典是键值对的集合，提供了高效的查找机制。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建字典</span></span><br><span class="line">person = &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Alice&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="string">&quot;skills&quot;</span>: [<span class="string">&quot;Python&quot;</span>, <span class="string">&quot;Java&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line">dict_from_pairs = <span class="built_in">dict</span>([(<span class="string">&quot;a&quot;</span>, <span class="number">1</span>), (<span class="string">&quot;b&quot;</span>, <span class="number">2</span>)])</span><br><span class="line">empty_dict = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问和修改</span></span><br><span class="line"><span class="built_in">print</span>(person[<span class="string">&quot;name&quot;</span>])              <span class="comment"># 访问值：Alice</span></span><br><span class="line">person[<span class="string">&quot;age&quot;</span>] = <span class="number">26</span>                 <span class="comment"># 修改值</span></span><br><span class="line">person[<span class="string">&quot;location&quot;</span>] = <span class="string">&quot;New York&quot;</span>    <span class="comment"># 添加新键值对</span></span><br><span class="line">value = person.get(<span class="string">&quot;salary&quot;</span>, <span class="number">0</span>)    <span class="comment"># 安全访问，如果键不存在返回默认值0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字典方法</span></span><br><span class="line">keys = person.keys()               <span class="comment"># 获取所有键</span></span><br><span class="line">values = person.values()           <span class="comment"># 获取所有值</span></span><br><span class="line">items = person.items()             <span class="comment"># 获取所有键值对</span></span><br><span class="line">person.update(&#123;<span class="string">&quot;salary&quot;</span>: <span class="number">5000</span>&#125;)    <span class="comment"># 更新或添加多个键值对</span></span><br><span class="line">popped = person.pop(<span class="string">&quot;age&quot;</span>)         <span class="comment"># 移除并返回指定键的值</span></span><br><span class="line">person.clear()                     <span class="comment"># 清空字典</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字典推导式</span></span><br><span class="line">squares = &#123;x: x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)&#125;  <span class="comment"># &#123;0:0, 1:1, 2:4, 3:9, 4:16&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 嵌套字典</span></span><br><span class="line">employees = &#123;</span><br><span class="line">    <span class="string">&quot;emp1&quot;</span>: &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;John&quot;</span>, <span class="string">&quot;salary&quot;</span>: <span class="number">5000</span>&#125;,</span><br><span class="line">    <span class="string">&quot;emp2&quot;</span>: &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;salary&quot;</span>: <span class="number">6000</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-3-控制结构"><a href="#1-3-控制结构" class="headerlink" title="1.3 控制结构"></a><strong>1.3 控制结构</strong></h2><p>Python提供了多种控制结构来控制程序的执行流程。</p>
<h3 id="1-3-1-条件语句-if"><a href="#1-3-1-条件语句-if" class="headerlink" title="1.3.1 条件语句(if)"></a><strong>1.3.1 条件语句(if)</strong></h3><p>Python使用缩进来标识代码块，条件语句的基本结构如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本if语句</span></span><br><span class="line">age = <span class="number">20</span></span><br><span class="line"><span class="keyword">if</span> age &gt;= <span class="number">18</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;成年人&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> age &gt;= <span class="number">12</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;青少年&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;儿童&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 条件表达式（三元运算符）</span></span><br><span class="line">status = <span class="string">&quot;成年&quot;</span> <span class="keyword">if</span> age &gt;= <span class="number">18</span> <span class="keyword">else</span> <span class="string">&quot;未成年&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 复合条件</span></span><br><span class="line">score = <span class="number">85</span></span><br><span class="line">is_student = <span class="literal">True</span></span><br><span class="line"><span class="keyword">if</span> score &gt;= <span class="number">60</span> <span class="keyword">and</span> is_student:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;及格&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多条件判断</span></span><br><span class="line">grade = <span class="string">&quot;A&quot;</span> <span class="keyword">if</span> score &gt;= <span class="number">90</span> <span class="keyword">else</span> <span class="string">&quot;B&quot;</span> <span class="keyword">if</span> score &gt;= <span class="number">80</span> <span class="keyword">else</span> <span class="string">&quot;C&quot;</span> <span class="keyword">if</span> score &gt;= <span class="number">70</span> <span class="keyword">else</span> <span class="string">&quot;D&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 成员判断</span></span><br><span class="line">fruits = [<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;orange&quot;</span>]</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;apple&quot;</span> <span class="keyword">in</span> fruits:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;有苹果&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 身份判断</span></span><br><span class="line">x = <span class="literal">None</span></span><br><span class="line"><span class="keyword">if</span> x <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;x是None&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 真值判断</span></span><br><span class="line"><span class="comment"># 以下值在条件判断中都被视为False：</span></span><br><span class="line"><span class="comment"># False, None, 0, 0.0, &#x27;&#x27;, [], &#123;&#125;, set()</span></span><br><span class="line">empty_list = []</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> empty_list:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;列表为空&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="1-3-2-for循环"><a href="#1-3-2-for循环" class="headerlink" title="1.3.2 for循环"></a><strong>1.3.2 for循环</strong></h3><p>Python的for循环可以遍历任何可迭代对象。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本for循环</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)  <span class="comment"># 打印0到4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历列表</span></span><br><span class="line">fruits = [<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;orange&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> fruit <span class="keyword">in</span> fruits:</span><br><span class="line">    <span class="built_in">print</span>(fruit)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用enumerate获取索引和值</span></span><br><span class="line"><span class="keyword">for</span> index, fruit <span class="keyword">in</span> <span class="built_in">enumerate</span>(fruits):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;索引 <span class="subst">&#123;index&#125;</span>: <span class="subst">&#123;fruit&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历字典</span></span><br><span class="line">person = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">25</span>&#125;</span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> person:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;key&#125;</span>: <span class="subst">&#123;person[key]&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更pythonic的字典遍历</span></span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> person.items():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;key&#125;</span>: <span class="subst">&#123;value&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 循环嵌套</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;(<span class="subst">&#123;i&#125;</span>, <span class="subst">&#123;j&#125;</span>)&quot;</span>, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>()  <span class="comment"># 换行</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表推导式中的for</span></span><br><span class="line">squares = [x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用zip同时遍历多个序列</span></span><br><span class="line">names = [<span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Charlie&quot;</span>]</span><br><span class="line">ages = [<span class="number">25</span>, <span class="number">30</span>, <span class="number">35</span>]</span><br><span class="line"><span class="keyword">for</span> name, age <span class="keyword">in</span> <span class="built_in">zip</span>(names, ages):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;name&#125;</span> is <span class="subst">&#123;age&#125;</span> years old&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="1-3-3-while循环"><a href="#1-3-3-while循环" class="headerlink" title="1.3.3 while循环"></a><strong>1.3.3 while循环</strong></h3><p>while循环在条件为真时重复执行代码块。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本while循环</span></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">5</span>:</span><br><span class="line">    <span class="built_in">print</span>(count)</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用while循环处理用户输入</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    response = <span class="built_in">input</span>(<span class="string">&quot;请输入&#x27;quit&#x27;退出: &quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> response.lower() == <span class="string">&#x27;quit&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;你输入了: <span class="subst">&#123;response&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 带else的while循环</span></span><br><span class="line"><span class="comment"># 当while循环正常结束（不是通过break）时执行else块</span></span><br><span class="line">number = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> number &lt; <span class="number">3</span>:</span><br><span class="line">    <span class="built_in">print</span>(number)</span><br><span class="line">    number += <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;循环正常结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用while循环实现倒计时</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">countdown = <span class="number">5</span></span><br><span class="line"><span class="keyword">while</span> countdown &gt; <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span>(countdown)</span><br><span class="line">    countdown -= <span class="number">1</span></span><br><span class="line">    time.sleep(<span class="number">1</span>)  <span class="comment"># 暂停1秒</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;发射！&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="1-3-4-循环控制语句"><a href="#1-3-4-循环控制语句" class="headerlink" title="1.3.4 循环控制语句"></a><strong>1.3.4 循环控制语句</strong></h3><p>Python提供了几种控制循环执行的语句。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># break: 立即退出循环</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">5</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="built_in">print</span>(i)  <span class="comment"># 只打印0到4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># continue: 跳过当前迭代</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="built_in">print</span>(i)  <span class="comment"># 打印0,1,3,4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pass: 空操作</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">pass</span>  <span class="comment"># 什么都不做</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 循环中的else子句</span></span><br><span class="line"><span class="comment"># 当循环正常完成（不是通过break退出）时执行</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;循环正常完成&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在嵌套循环中使用break和continue</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        <span class="keyword">if</span> i == j:</span><br><span class="line">            <span class="keyword">continue</span>  <span class="comment"># 跳过当前内循环迭代</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;(<span class="subst">&#123;i&#125;</span>, <span class="subst">&#123;j&#125;</span>)&quot;</span>, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>()</span><br></pre></td></tr></table></figure>

<h3 id="1-3-5-异常处理"><a href="#1-3-5-异常处理" class="headerlink" title="1.3.5 异常处理"></a><strong>1.3.5 异常处理</strong></h3><p>虽然这通常在后面的章节介绍，但基本的异常处理也是控制流的重要部分：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本的try-except结构</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    number = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入一个数字: &quot;</span>))</span><br><span class="line">    result = <span class="number">10</span> / number</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;结果是: <span class="subst">&#123;result&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> ValueError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;输入必须是数字&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不能除以零&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;发生错误: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;计算成功完成&quot;</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;无论如何都会执行这里&quot;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="第二章：函数与模块"><a href="#第二章：函数与模块" class="headerlink" title="第二章：函数与模块"></a><strong>第二章：函数与模块</strong></h1><h2 id="2-1-函数的定义与调用"><a href="#2-1-函数的定义与调用" class="headerlink" title="2.1 函数的定义与调用"></a><strong>2.1 函数的定义与调用</strong></h2><p>函数是可重用的代码块，它可以接收参数、执行特定任务并返回结果。</p>
<h3 id="2-1-1-基本函数定义"><a href="#2-1-1-基本函数定义" class="headerlink" title="2.1.1 基本函数定义"></a><strong>2.1.1 基本函数定义</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本函数定义</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    向指定的人打招呼</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        name: 人名</span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        打招呼的字符串</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;Hello, <span class="subst">&#123;name&#125;</span>!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line"><span class="built_in">print</span>(greet(<span class="string">&quot;Alice&quot;</span>))  <span class="comment"># 输出: Hello, Alice!</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多返回值</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_coordinates</span>():</span><br><span class="line">    x = <span class="number">10</span></span><br><span class="line">    y = <span class="number">20</span></span><br><span class="line">    <span class="keyword">return</span> x, y  <span class="comment"># 实际上返回一个元组</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解包多返回值</span></span><br><span class="line">x, y = get_coordinates()</span><br></pre></td></tr></table></figure>

<h3 id="2-1-2-函数参数"><a href="#2-1-2-函数参数" class="headerlink" title="2.1.2 函数参数"></a><strong>2.1.2 函数参数</strong></h3><p>Python提供了多种参数传递方式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 位置参数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">power</span>(<span class="params">base, exponent</span>):</span><br><span class="line">    <span class="keyword">return</span> base ** exponent</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(power(<span class="number">2</span>, <span class="number">3</span>))  <span class="comment"># 8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认参数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">name, greeting=<span class="string">&quot;Hello&quot;</span></span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;greeting&#125;</span>, <span class="subst">&#123;name&#125;</span>!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(greet(<span class="string">&quot;Alice&quot;</span>))          <span class="comment"># Hello, Alice!</span></span><br><span class="line"><span class="built_in">print</span>(greet(<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Hi&quot;</span>))      <span class="comment"># Hi, Bob!</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关键字参数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_profile</span>(<span class="params">name, age, city</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;name&#125;</span> is <span class="subst">&#123;age&#125;</span> years old and lives in <span class="subst">&#123;city&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(create_profile(age=<span class="number">25</span>, city=<span class="string">&quot;Beijing&quot;</span>, name=<span class="string">&quot;Alice&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可变位置参数 (*args)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sum_all</span>(<span class="params">*numbers</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span>(numbers)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(sum_all(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>))  <span class="comment"># 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可变关键字参数 (**kwargs)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_info</span>(<span class="params">**info</span>):</span><br><span class="line">    <span class="keyword">for</span> key, value <span class="keyword">in</span> info.items():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;key&#125;</span>: <span class="subst">&#123;value&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">print_info(name=<span class="string">&quot;Alice&quot;</span>, age=<span class="number">25</span>, city=<span class="string">&quot;Beijing&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 混合使用各种参数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">complex_function</span>(<span class="params">pos1, pos2, *args, default=<span class="string">&quot;default&quot;</span>, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;位置参数: <span class="subst">&#123;pos1&#125;</span>, <span class="subst">&#123;pos2&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;可变位置参数: <span class="subst">&#123;args&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;默认参数: <span class="subst">&#123;default&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;关键字参数: <span class="subst">&#123;kwargs&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">complex_function(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, x=<span class="number">10</span>, y=<span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<h3 id="2-1-3-作用域和命名空间"><a href="#2-1-3-作用域和命名空间" class="headerlink" title="2.1.3 作用域和命名空间"></a><strong>2.1.3 作用域和命名空间</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 全局变量和局部变量</span></span><br><span class="line">global_var = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">function</span>():</span><br><span class="line">    local_var = <span class="number">20</span></span><br><span class="line">    <span class="built_in">print</span>(global_var)  <span class="comment"># 可以访问全局变量</span></span><br><span class="line">    <span class="built_in">print</span>(local_var)   <span class="comment"># 局部变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># global关键字</span></span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">increment</span>():</span><br><span class="line">    <span class="keyword">global</span> counter</span><br><span class="line">    counter += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> counter</span><br><span class="line"></span><br><span class="line"><span class="comment"># nonlocal关键字（用于嵌套函数）</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>():</span><br><span class="line">    x = <span class="number">1</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="keyword">nonlocal</span> x</span><br><span class="line">        x += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="comment"># 闭包示例</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_counter</span>():</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">increment</span>():</span><br><span class="line">        <span class="keyword">nonlocal</span> count</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> count</span><br><span class="line">    <span class="keyword">return</span> increment</span><br></pre></td></tr></table></figure>

<h2 id="2-2-高级函数特性"><a href="#2-2-高级函数特性" class="headerlink" title="2.2 高级函数特性"></a><strong>2.2 高级函数特性</strong></h2><h3 id="2-2-1-装饰器"><a href="#2-2-1-装饰器" class="headerlink" title="2.2.1 装饰器"></a><strong>2.2.1 装饰器</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本装饰器</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">timer</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">import</span> time</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        start = time.time()</span><br><span class="line">        result = func(*args, **kwargs)</span><br><span class="line">        end = time.time()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;函数 <span class="subst">&#123;func.__name__&#125;</span> 执行时间: <span class="subst">&#123;end - start&#125;</span>秒&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@timer</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">slow_function</span>():</span><br><span class="line">    <span class="keyword">import</span> time</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;完成&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 带参数的装饰器</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">repeat</span>(<span class="params">times</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decorator</span>(<span class="params">func</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(times):</span><br><span class="line">                result = func(*args, **kwargs)</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@repeat(<span class="params"><span class="number">3</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Hello <span class="subst">&#123;name&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="2-2-2-生成器"><a href="#2-2-2-生成器" class="headerlink" title="2.2.2 生成器"></a><strong>2.2.2 生成器</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成器函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">countdown</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">while</span> n &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">yield</span> n</span><br><span class="line">        n -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用生成器</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> countdown(<span class="number">5</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成器表达式</span></span><br><span class="line">squares = (x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 无限生成器</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">infinite_sequence</span>():</span><br><span class="line">    num = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">yield</span> num</span><br><span class="line">        num += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3-模块和包"><a href="#2-3-模块和包" class="headerlink" title="2.3 模块和包"></a><strong>2.3 模块和包</strong></h2><h3 id="2-3-1-模块导入"><a href="#2-3-1-模块导入" class="headerlink" title="2.3.1 模块导入"></a><strong>2.3.1 模块导入</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本导入</span></span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="built_in">print</span>(math.pi)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导入特定内容</span></span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint, choice</span><br><span class="line"><span class="built_in">print</span>(randint(<span class="number">1</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用别名</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导入所有内容（不推荐）</span></span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> *</span><br></pre></td></tr></table></figure>

<h3 id="2-3-2-创建自己的模块"><a href="#2-3-2-创建自己的模块" class="headerlink" title="2.3.2 创建自己的模块"></a><strong>2.3.2 创建自己的模块</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mymodule.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;Hello, <span class="subst">&#123;name&#125;</span>!&quot;</span></span><br><span class="line"></span><br><span class="line">PI = <span class="number">3.14159</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Calculator</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self, x, y</span>):</span><br><span class="line">        <span class="keyword">return</span> x + y</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在其他文件中使用</span></span><br><span class="line"><span class="keyword">import</span> mymodule</span><br><span class="line"><span class="built_in">print</span>(mymodule.greet(<span class="string">&quot;Alice&quot;</span>))</span><br></pre></td></tr></table></figure>

<h3 id="2-3-3-包的结构"><a href="#2-3-3-包的结构" class="headerlink" title="2.3.3 包的结构"></a><strong>2.3.3 包的结构</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mypackage/</span><br><span class="line">    __init__.py</span><br><span class="line">    module1.py</span><br><span class="line">    module2.py</span><br><span class="line">    subpackage/</span><br><span class="line">        __init__.py</span><br><span class="line">        module3.py</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># __init__.py 示例</span></span><br><span class="line"><span class="keyword">from</span> .module1 <span class="keyword">import</span> function1</span><br><span class="line"><span class="keyword">from</span> .module2 <span class="keyword">import</span> function2</span><br><span class="line"></span><br><span class="line">__all__ = [<span class="string">&#x27;function1&#x27;</span>, <span class="string">&#x27;function2&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="2-3-4-常用标准库"><a href="#2-3-4-常用标准库" class="headerlink" title="2.3.4 常用标准库"></a><strong>2.3.4 常用标准库</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 日期和时间处理</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta</span><br><span class="line">now = datetime.now()</span><br><span class="line">future = now + timedelta(days=<span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件路径处理</span></span><br><span class="line"><span class="keyword">import</span> os.path</span><br><span class="line">path = os.path.join(<span class="string">&#x27;folder&#x27;</span>, <span class="string">&#x27;subfolder&#x27;</span>, <span class="string">&#x27;file.txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># JSON处理</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line">data = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">25</span>&#125;</span><br><span class="line">json_str = json.dumps(data)</span><br><span class="line">parsed_data = json.loads(json_str)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 正则表达式</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">pattern = <span class="string">r&#x27;\d+&#x27;</span></span><br><span class="line">text = <span class="string">&quot;abc123def456&quot;</span></span><br><span class="line">numbers = re.findall(pattern, text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机数</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line">random_num = random.randint(<span class="number">1</span>, <span class="number">100</span>)</span><br><span class="line">random_choice = random.choice([<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 系统相关</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="built_in">print</span>(sys.version)</span><br><span class="line"><span class="built_in">print</span>(sys.platform)</span><br></pre></td></tr></table></figure>

<h1 id="第三章：面向对象编程（OOP）"><a href="#第三章：面向对象编程（OOP）" class="headerlink" title="第三章：面向对象编程（OOP）"></a><strong>第三章：面向对象编程（OOP）</strong></h1><h2 id="3-1-类与对象基础"><a href="#3-1-类与对象基础" class="headerlink" title="3.1 类与对象基础"></a><strong>3.1 类与对象基础</strong></h2><h3 id="3-1-1-类的定义与实例化"><a href="#3-1-1-类的定义与实例化" class="headerlink" title="3.1.1 类的定义与实例化"></a><strong>3.1.1 类的定义与实例化</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本类定义</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="comment"># 类变量（所有实例共享）</span></span><br><span class="line">    species = <span class="string">&quot;Human&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 构造方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        <span class="comment"># 实例变量（每个实例独有）</span></span><br><span class="line">        <span class="variable language_">self</span>.name = name</span><br><span class="line">        <span class="variable language_">self</span>.age = age</span><br><span class="line">        <span class="variable language_">self</span>._private = <span class="literal">None</span>      <span class="comment"># 约定私有（单下划线）</span></span><br><span class="line">        <span class="variable language_">self</span>.__very_private = <span class="number">0</span>   <span class="comment"># 名称改写私有（双下划线）</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 实例方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;Hello, my name is <span class="subst">&#123;self.name&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 获取年龄描述</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_age_description</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.age &lt; <span class="number">18</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;未成年&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;成年人&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建实例</span></span><br><span class="line">person1 = Person(<span class="string">&quot;Alice&quot;</span>, <span class="number">25</span>)</span><br><span class="line">person2 = Person(<span class="string">&quot;Bob&quot;</span>, <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问属性和方法</span></span><br><span class="line"><span class="built_in">print</span>(person1.name)          <span class="comment"># 访问实例变量</span></span><br><span class="line"><span class="built_in">print</span>(Person.species)        <span class="comment"># 访问类变量</span></span><br><span class="line"><span class="built_in">print</span>(person1.greet())      <span class="comment"># 调用方法</span></span><br></pre></td></tr></table></figure>

<h3 id="3-1-2-属性装饰器"><a href="#3-1-2-属性装饰器" class="headerlink" title="3.1.2 属性装饰器"></a><strong>3.1.2 属性装饰器</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>._score = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用property装饰器</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">score</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>._score</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 设置器</span></span><br><span class="line"><span class="meta">    @score.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">score</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(value, <span class="built_in">int</span>):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;分数必须是整数&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> value &lt; <span class="number">0</span> <span class="keyword">or</span> value &gt; <span class="number">100</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;分数必须在0-100之间&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>._score = value</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 只读属性</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">grade</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>._score &gt;= <span class="number">90</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;A&#x27;</span></span><br><span class="line">        <span class="keyword">elif</span> <span class="variable language_">self</span>._score &gt;= <span class="number">80</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;B&#x27;</span></span><br><span class="line">        <span class="keyword">elif</span> <span class="variable language_">self</span>._score &gt;= <span class="number">70</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;C&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;D&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用属性</span></span><br><span class="line">student = Student()</span><br><span class="line">student.score = <span class="number">85</span>  <span class="comment"># 使用setter</span></span><br><span class="line"><span class="built_in">print</span>(student.score)  <span class="comment"># 使用getter</span></span><br><span class="line"><span class="built_in">print</span>(student.grade)  <span class="comment"># 访问只读属性</span></span><br></pre></td></tr></table></figure>

<h3 id="3-1-3-静态方法和类方法"><a href="#3-1-3-静态方法和类方法" class="headerlink" title="3.1.3 静态方法和类方法"></a><strong>3.1.3 静态方法和类方法</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MathOperations</span>:</span><br><span class="line">    <span class="comment"># 类变量</span></span><br><span class="line">    pi = <span class="number">3.14159</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="variable language_">self</span>.value = value</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 实例方法（需要实例）</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">double</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.value * <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 静态方法（不需要实例）</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">is_positive</span>(<span class="params">number</span>):</span><br><span class="line">        <span class="keyword">return</span> number &gt; <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 类方法（可访问类变量）</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">circle_area</span>(<span class="params">cls, radius</span>):</span><br><span class="line">        <span class="keyword">return</span> cls.pi * radius ** <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 类方法作为替代构造函数</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">from_string</span>(<span class="params">cls, string_value</span>):</span><br><span class="line">        value = <span class="built_in">float</span>(string_value)</span><br><span class="line">        <span class="keyword">return</span> cls(value)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line">math_ops = MathOperations(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(math_ops.double())                    <span class="comment"># 实例方法</span></span><br><span class="line"><span class="built_in">print</span>(MathOperations.is_positive(<span class="number">10</span>))       <span class="comment"># 静态方法</span></span><br><span class="line"><span class="built_in">print</span>(MathOperations.circle_area(<span class="number">5</span>))        <span class="comment"># 类方法</span></span><br><span class="line">new_ops = MathOperations.from_string(<span class="string">&quot;10&quot;</span>)  <span class="comment"># 替代构造函数</span></span><br></pre></td></tr></table></figure>

<h2 id="3-2-继承与多态"><a href="#3-2-继承与多态" class="headerlink" title="3.2 继承与多态"></a><strong>3.2 继承与多态</strong></h2><h3 id="3-2-1-基本继承"><a href="#3-2-1-基本继承" class="headerlink" title="3.2.1 基本继承"></a><strong>3.2.1 基本继承</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        <span class="variable language_">self</span>.name = name</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError(<span class="string">&quot;子类必须实现这个方法&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">introduce</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;I am <span class="subst">&#123;self.name&#125;</span>, and I can <span class="subst">&#123;self.speak()&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 子类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;woof!&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 扩展父类方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">introduce</span>(<span class="params">self</span>):</span><br><span class="line">        base_intro = <span class="built_in">super</span>().introduce()</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;base_intro&#125;</span> I&#x27;m a good boy!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;meow!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line">dog = Dog(<span class="string">&quot;Buddy&quot;</span>)</span><br><span class="line">cat = Cat(<span class="string">&quot;Whiskers&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(dog.introduce())</span><br><span class="line"><span class="built_in">print</span>(cat.introduce())</span><br></pre></td></tr></table></figure>

<h3 id="3-2-2-多重继承"><a href="#3-2-2-多重继承" class="headerlink" title="3.2.2 多重继承"></a><strong>3.2.2 多重继承</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Flyable</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fly</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;I can fly!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Swimmable</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">swim</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;I can swim!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Duck</span>(Animal, Flyable, Swimmable):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;quack!&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">introduce</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;<span class="built_in">super</span>().introduce()&#125;</span> <span class="subst">&#123;self.fly()&#125;</span> <span class="subst">&#123;self.swim()&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用多重继承</span></span><br><span class="line">duck = Duck(<span class="string">&quot;Donald&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(duck.introduce())</span><br><span class="line"><span class="built_in">print</span>(Duck.__mro__)  <span class="comment"># 查看方法解析顺序</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-3-抽象基类"><a href="#3-2-3-抽象基类" class="headerlink" title="3.2.3 抽象基类"></a><strong>3.2.3 抽象基类</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABC, abstractmethod</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span>(<span class="title class_ inherited__">ABC</span>):</span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">area</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">perimeter</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span>(<span class="title class_ inherited__">Shape</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, width, height</span>):</span><br><span class="line">        <span class="variable language_">self</span>.width = width</span><br><span class="line">        <span class="variable language_">self</span>.height = height</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">area</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.width * <span class="variable language_">self</span>.height</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">perimeter</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * (<span class="variable language_">self</span>.width + <span class="variable language_">self</span>.height)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span>(<span class="title class_ inherited__">Shape</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, radius</span>):</span><br><span class="line">        <span class="variable language_">self</span>.radius = radius</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">area</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3.14159</span> * <span class="variable language_">self</span>.radius ** <span class="number">2</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">perimeter</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * <span class="number">3.14159</span> * <span class="variable language_">self</span>.radius</span><br></pre></td></tr></table></figure>

<h2 id="3-3-魔术方法"><a href="#3-3-魔术方法" class="headerlink" title="3.3 魔术方法"></a><strong>3.3 魔术方法</strong></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Vector</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x, y</span>):</span><br><span class="line">        <span class="variable language_">self</span>.x = x</span><br><span class="line">        <span class="variable language_">self</span>.y = y</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 字符串表示</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;Vector(<span class="subst">&#123;self.x&#125;</span>, <span class="subst">&#123;self.y&#125;</span>)&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;Vector(x=<span class="subst">&#123;self.x&#125;</span>, y=<span class="subst">&#123;self.y&#125;</span>)&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 运算符重载</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__add__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> Vector(<span class="variable language_">self</span>.x + other.x, <span class="variable language_">self</span>.y + other.y)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__sub__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> Vector(<span class="variable language_">self</span>.x - other.x, <span class="variable language_">self</span>.y - other.y)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 比较运算</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__eq__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.x == other.x <span class="keyword">and</span> <span class="variable language_">self</span>.y == other.y</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 长度</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">int</span>((<span class="variable language_">self</span>.x ** <span class="number">2</span> + <span class="variable language_">self</span>.y ** <span class="number">2</span>) ** <span class="number">0.5</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 调用对象</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, scale</span>):</span><br><span class="line">        <span class="keyword">return</span> Vector(<span class="variable language_">self</span>.x * scale, <span class="variable language_">self</span>.y * scale)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line">v1 = Vector(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">v2 = Vector(<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(v1 + v2)        <span class="comment"># 加法</span></span><br><span class="line"><span class="built_in">print</span>(v1 == v2)       <span class="comment"># 比较</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(v1))        <span class="comment"># 长度</span></span><br><span class="line"><span class="built_in">print</span>(v1(<span class="number">2</span>))          <span class="comment"># 调用</span></span><br></pre></td></tr></table></figure>

<h2 id="3-4-设计模式示例"><a href="#3-4-设计模式示例" class="headerlink" title="3.4 设计模式示例"></a><strong>3.4 设计模式示例</strong></h2><h3 id="3-4-1-单例模式"><a href="#3-4-1-单例模式" class="headerlink" title="3.4.1 单例模式"></a><strong>3.4.1 单例模式</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>:</span><br><span class="line">    _instance = <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="keyword">if</span> cls._instance <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            cls._instance = <span class="built_in">super</span>().__new__(cls)</span><br><span class="line">        <span class="keyword">return</span> cls._instance</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 初始化代码（只在第一次创建实例时执行）</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(<span class="variable language_">self</span>, <span class="string">&#x27;initialized&#x27;</span>):</span><br><span class="line">            <span class="variable language_">self</span>.initialized = <span class="literal">True</span></span><br><span class="line">            <span class="variable language_">self</span>.data = []</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试单例</span></span><br><span class="line">s1 = Singleton()</span><br><span class="line">s2 = Singleton()</span><br><span class="line"><span class="built_in">print</span>(s1 <span class="keyword">is</span> s2)  <span class="comment"># True</span></span><br></pre></td></tr></table></figure>

<h3 id="3-4-2-工厂模式"><a href="#3-4-2-工厂模式" class="headerlink" title="3.4.2 工厂模式"></a><strong>3.4.2 工厂模式</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Woof!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Meow!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AnimalFactory</span>:</span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_animal</span>(<span class="params">animal_type</span>):</span><br><span class="line">        <span class="keyword">if</span> animal_type.lower() == <span class="string">&quot;dog&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> Dog()</span><br><span class="line">        <span class="keyword">elif</span> animal_type.lower() == <span class="string">&quot;cat&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> Cat()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Unknown animal type&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用工厂</span></span><br><span class="line">factory = AnimalFactory()</span><br><span class="line">dog = factory.create_animal(<span class="string">&quot;dog&quot;</span>)</span><br><span class="line">cat = factory.create_animal(<span class="string">&quot;cat&quot;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="第四章：文件操作与异常处理"><a href="#第四章：文件操作与异常处理" class="headerlink" title="第四章：文件操作与异常处理"></a><strong>第四章：文件操作与异常处理</strong></h1><h2 id="4-1-文件操作"><a href="#4-1-文件操作" class="headerlink" title="4.1 文件操作"></a><strong>4.1 文件操作</strong></h2><h3 id="4-1-1-基本文件操作"><a href="#4-1-1-基本文件操作" class="headerlink" title="4.1.1 基本文件操作"></a><strong>4.1.1 基本文件操作</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开文件的不同模式</span></span><br><span class="line"><span class="comment"># &#x27;r&#x27;: 只读（默认）</span></span><br><span class="line"><span class="comment"># &#x27;w&#x27;: 写入（会覆盖）</span></span><br><span class="line"><span class="comment"># &#x27;a&#x27;: 追加</span></span><br><span class="line"><span class="comment"># &#x27;x&#x27;: 独占写入</span></span><br><span class="line"><span class="comment"># &#x27;b&#x27;: 二进制模式</span></span><br><span class="line"><span class="comment"># &#x27;t&#x27;: 文本模式（默认）</span></span><br><span class="line"><span class="comment"># &#x27;+&#x27;: 读写模式</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 基本读取操作</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;example.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    <span class="comment"># 读取整个文件</span></span><br><span class="line">    content = file.read()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 读取指定字节数</span></span><br><span class="line">    file.seek(<span class="number">0</span>)  <span class="comment"># 回到文件开头</span></span><br><span class="line">    chunk = file.read(<span class="number">10</span>)  <span class="comment"># 读取10个字符</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 读取一行</span></span><br><span class="line">    file.seek(<span class="number">0</span>)</span><br><span class="line">    line = file.readline()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 读取所有行到列表</span></span><br><span class="line">    file.seek(<span class="number">0</span>)</span><br><span class="line">    lines = file.readlines()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 逐行读取（内存友好）</span></span><br><span class="line">    file.seek(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> file:</span><br><span class="line">        <span class="built_in">print</span>(line.strip())  <span class="comment"># strip()去除首尾空白字符</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 基本写入操作</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;output.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    <span class="comment"># 写入字符串</span></span><br><span class="line">    file.write(<span class="string">&#x27;Hello, World!\n&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 写入多行</span></span><br><span class="line">    lines = [<span class="string">&#x27;Line 1\n&#x27;</span>, <span class="string">&#x27;Line 2\n&#x27;</span>, <span class="string">&#x27;Line 3\n&#x27;</span>]</span><br><span class="line">    file.writelines(lines)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 追加模式</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;log.txt&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    file.write(<span class="string">&#x27;New log entry\n&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="4-1-2-高级文件操作"><a href="#4-1-2-高级文件操作" class="headerlink" title="4.1.2 高级文件操作"></a><strong>4.1.2 高级文件操作</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件路径操作</span></span><br><span class="line">current_dir = os.getcwd()  <span class="comment"># 获取当前工作目录</span></span><br><span class="line">file_path = os.path.join(<span class="string">&#x27;folder&#x27;</span>, <span class="string">&#x27;subfolder&#x27;</span>, <span class="string">&#x27;file.txt&#x27;</span>)  <span class="comment"># 构建路径</span></span><br><span class="line">abs_path = os.path.abspath(file_path)  <span class="comment"># 获取绝对路径</span></span><br><span class="line">dir_name = os.path.dirname(file_path)  <span class="comment"># 获取目录名</span></span><br><span class="line">base_name = os.path.basename(file_path)  <span class="comment"># 获取文件名</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件操作</span></span><br><span class="line">os.makedirs(<span class="string">&#x27;new_folder&#x27;</span>, exist_ok=<span class="literal">True</span>)  <span class="comment"># 创建目录</span></span><br><span class="line">os.rename(<span class="string">&#x27;old.txt&#x27;</span>, <span class="string">&#x27;new.txt&#x27;</span>)  <span class="comment"># 重命名文件</span></span><br><span class="line">os.remove(<span class="string">&#x27;file.txt&#x27;</span>)  <span class="comment"># 删除文件</span></span><br><span class="line">shutil.copy(<span class="string">&#x27;source.txt&#x27;</span>, <span class="string">&#x27;dest.txt&#x27;</span>)  <span class="comment"># 复制文件</span></span><br><span class="line">shutil.move(<span class="string">&#x27;source.txt&#x27;</span>, <span class="string">&#x27;new_location&#x27;</span>)  <span class="comment"># 移动文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件信息</span></span><br><span class="line">file_exists = os.path.exists(<span class="string">&#x27;file.txt&#x27;</span>)  <span class="comment"># 检查文件是否存在</span></span><br><span class="line">is_file = os.path.isfile(<span class="string">&#x27;file.txt&#x27;</span>)  <span class="comment"># 是否是文件</span></span><br><span class="line">is_dir = os.path.isdir(<span class="string">&#x27;folder&#x27;</span>)  <span class="comment"># 是否是目录</span></span><br><span class="line">file_size = os.path.getsize(<span class="string">&#x27;file.txt&#x27;</span>)  <span class="comment"># 获取文件大小</span></span><br><span class="line">file_stats = os.stat(<span class="string">&#x27;file.txt&#x27;</span>)  <span class="comment"># 获取文件详细信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历目录</span></span><br><span class="line"><span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(<span class="string">&#x27;folder&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;当前目录: <span class="subst">&#123;root&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;子目录: <span class="subst">&#123;dirs&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;文件: <span class="subst">&#123;files&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="4-1-3-二进制文件操作"><a href="#4-1-3-二进制文件操作" class="headerlink" title="4.1.3 二进制文件操作"></a><strong>4.1.3 二进制文件操作</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取二进制文件</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;image.jpg&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    binary_data = file.read()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入二进制文件</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;copy.jpg&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    file.write(binary_data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用struct处理二进制数据</span></span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将数据打包成二进制</span></span><br><span class="line">data = struct.pack(<span class="string">&#x27;iif&#x27;</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3.14</span>)  <span class="comment"># i:int, f:float</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从二进制解包数据</span></span><br><span class="line">numbers = struct.unpack(<span class="string">&#x27;iif&#x27;</span>, data)</span><br></pre></td></tr></table></figure>

<h2 id="4-2-异常处理"><a href="#4-2-异常处理" class="headerlink" title="4.2 异常处理"></a><strong>4.2 异常处理</strong></h2><h3 id="4-2-1-基本异常处理"><a href="#4-2-1-基本异常处理" class="headerlink" title="4.2.1 基本异常处理"></a><strong>4.2.1 基本异常处理</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># try-except 基本结构</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    x = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入一个数字: &quot;</span>))</span><br><span class="line">    result = <span class="number">10</span> / x</span><br><span class="line"><span class="keyword">except</span> ValueError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;输入必须是数字&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不能除以零&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;发生错误: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;结果是: <span class="subst">&#123;result&#125;</span>&quot;</span>)  <span class="comment"># 只在try块成功时执行</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;这总是会执行&quot;</span>)  <span class="comment"># 无论是否发生异常都会执行</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多个异常在一起处理</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 可能引发异常的代码</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span> (ValueError, TypeError) <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;发生了值错误或类型错误: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="4-2-2-自定义异常"><a href="#4-2-2-自定义异常" class="headerlink" title="4.2.2 自定义异常"></a><strong>4.2.2 自定义异常</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义自定义异常</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CustomError</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, message, error_code</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(message)</span><br><span class="line">        <span class="variable language_">self</span>.error_code = error_code</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用自定义异常</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">process_age</span>(<span class="params">age</span>):</span><br><span class="line">    <span class="keyword">if</span> age &lt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">raise</span> CustomError(<span class="string">&quot;年龄不能为负数&quot;</span>, <span class="number">1001</span>)</span><br><span class="line">    <span class="keyword">if</span> age &gt; <span class="number">150</span>:</span><br><span class="line">        <span class="keyword">raise</span> CustomError(<span class="string">&quot;年龄超出正常范围&quot;</span>, <span class="number">1002</span>)</span><br><span class="line">    <span class="keyword">return</span> age</span><br><span class="line"></span><br><span class="line"><span class="comment"># 处理自定义异常</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    age = process_age(-<span class="number">5</span>)</span><br><span class="line"><span class="keyword">except</span> CustomError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;错误 <span class="subst">&#123;e.error_code&#125;</span>: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="4-2-3-上下文管理器"><a href="#4-2-3-上下文管理器" class="headerlink" title="4.2.3 上下文管理器"></a><strong>4.2.3 上下文管理器</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自定义上下文管理器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FileManager</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, filename, mode</span>):</span><br><span class="line">        <span class="variable language_">self</span>.filename = filename</span><br><span class="line">        <span class="variable language_">self</span>.mode = mode</span><br><span class="line">        <span class="variable language_">self</span>.file = <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.file = <span class="built_in">open</span>(<span class="variable language_">self</span>.filename, <span class="variable language_">self</span>.mode)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.file</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, exc_type, exc_val, exc_tb</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.file:</span><br><span class="line">            <span class="variable language_">self</span>.file.close()</span><br><span class="line">        <span class="comment"># 返回True表示异常已处理</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用自定义上下文管理器</span></span><br><span class="line"><span class="keyword">with</span> FileManager(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    file.write(<span class="string">&#x27;Hello, World!&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># contextlib装饰器创建上下文管理器</span></span><br><span class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> contextmanager</span><br><span class="line"></span><br><span class="line"><span class="meta">@contextmanager</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">timer</span>():</span><br><span class="line">    <span class="keyword">import</span> time</span><br><span class="line">    start = time.time()</span><br><span class="line">    <span class="keyword">yield</span>  <span class="comment"># 这里是with块中的代码执行点</span></span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;执行时间: <span class="subst">&#123;end - start&#125;</span>秒&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用timer上下文管理器</span></span><br><span class="line"><span class="keyword">with</span> timer():</span><br><span class="line">    <span class="comment"># 执行一些耗时操作</span></span><br><span class="line">    <span class="keyword">import</span> time</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<h3 id="4-2-4-调试和日志"><a href="#4-2-4-调试和日志" class="headerlink" title="4.2.4 调试和日志"></a><strong>4.2.4 调试和日志</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置日志</span></span><br><span class="line">logging.basicConfig(</span><br><span class="line">    level=logging.DEBUG,</span><br><span class="line">    <span class="built_in">format</span>=<span class="string">&#x27;%(asctime)s - %(name)s - %(levelname)s - %(message)s&#x27;</span>,</span><br><span class="line">    filename=<span class="string">&#x27;app.log&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建logger</span></span><br><span class="line">logger = logging.getLogger(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用不同级别的日志</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    logger.debug(<span class="string">&quot;调试信息&quot;</span>)</span><br><span class="line">    logger.info(<span class="string">&quot;普通信息&quot;</span>)</span><br><span class="line">    logger.warning(<span class="string">&quot;警告信息&quot;</span>)</span><br><span class="line">    result = <span class="number">1</span> / <span class="number">0</span>  <span class="comment"># 故意制造错误</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    logger.error(<span class="string">&quot;发生错误&quot;</span>, exc_info=<span class="literal">True</span>)</span><br><span class="line">    logger.critical(<span class="string">&quot;严重错误&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 断言</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calculate_square_root</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">assert</span> n &gt;= <span class="number">0</span>, <span class="string">&quot;输入必须是非负数&quot;</span></span><br><span class="line">    <span class="keyword">return</span> n ** <span class="number">0.5</span></span><br></pre></td></tr></table></figure>

<h1 id="第五章：高级Python特性"><a href="#第五章：高级Python特性" class="headerlink" title="第五章：高级Python特性"></a><strong>第五章：高级Python特性</strong></h1><h2 id="5-1-迭代器和生成器"><a href="#5-1-迭代器和生成器" class="headerlink" title="5.1 迭代器和生成器"></a><strong>5.1 迭代器和生成器</strong></h2><h3 id="5-1-1-迭代器"><a href="#5-1-1-迭代器" class="headerlink" title="5.1.1 迭代器"></a><strong>5.1.1 迭代器</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自定义迭代器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CountDown</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, start</span>):</span><br><span class="line">        <span class="variable language_">self</span>.start = start</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.start &lt;= <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> StopIteration</span><br><span class="line">        <span class="variable language_">self</span>.start -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.start + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用迭代器</span></span><br><span class="line">counter = CountDown(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> counter:</span><br><span class="line">    <span class="built_in">print</span>(num)  <span class="comment"># 5, 4, 3, 2, 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 实现可迭代的范围类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Range</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, start, end</span>):</span><br><span class="line">        <span class="variable language_">self</span>.start = start</span><br><span class="line">        <span class="variable language_">self</span>.end = end</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        current = <span class="variable language_">self</span>.start</span><br><span class="line">        <span class="keyword">while</span> current &lt; <span class="variable language_">self</span>.end:</span><br><span class="line">            <span class="keyword">yield</span> current</span><br><span class="line">            current += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用自定义范围</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> Range(<span class="number">1</span>, <span class="number">5</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)  <span class="comment"># 1, 2, 3, 4</span></span><br></pre></td></tr></table></figure>

<h3 id="5-1-2-生成器"><a href="#5-1-2-生成器" class="headerlink" title="5.1.2 生成器"></a><strong>5.1.2 生成器</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成器函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fibonacci</span>():</span><br><span class="line">    a, b = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">yield</span> a</span><br><span class="line">        a, b = b, a + b</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用生成器</span></span><br><span class="line">fib = fibonacci()</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">next</span>(fib))  <span class="comment"># 前10个斐波那契数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成器表达式</span></span><br><span class="line">squares = (x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(squares))  <span class="comment"># [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成器管道</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">numbers</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>):</span><br><span class="line">        <span class="keyword">yield</span> i</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">squares</span>(<span class="params">numbers</span>):</span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> numbers:</span><br><span class="line">        <span class="keyword">yield</span> n**<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">evens</span>(<span class="params">numbers</span>):</span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> numbers:</span><br><span class="line">        <span class="keyword">if</span> n % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">yield</span> n</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用生成器管道</span></span><br><span class="line">pipeline = evens(squares(numbers()))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(pipeline))  <span class="comment"># [4, 16, 36, 64, 100]</span></span><br></pre></td></tr></table></figure>

<h2 id="5-2-装饰器进阶"><a href="#5-2-装饰器进阶" class="headerlink" title="5.2 装饰器进阶"></a><strong>5.2 装饰器进阶</strong></h2><h3 id="5-2-1-带参数的装饰器"><a href="#5-2-1-带参数的装饰器" class="headerlink" title="5.2.1 带参数的装饰器"></a><strong>5.2.1 带参数的装饰器</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 带参数的装饰器</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">repeat</span>(<span class="params">times</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decorator</span>(<span class="params">func</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(times):</span><br><span class="line">                result = func(*args, **kwargs)</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@repeat(<span class="params"><span class="number">3</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Hello <span class="subst">&#123;name&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 类作为装饰器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Trace</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, handle_result=<span class="literal">False</span></span>):</span><br><span class="line">        <span class="variable language_">self</span>.handle_result = handle_result</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, func</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Calling <span class="subst">&#123;func.__name__&#125;</span>&quot;</span>)</span><br><span class="line">            result = func(*args, **kwargs)</span><br><span class="line">            <span class="keyword">if</span> <span class="variable language_">self</span>.handle_result:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;Result: <span class="subst">&#123;result&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@Trace(<span class="params">handle_result=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br></pre></td></tr></table></figure>

<h3 id="5-2-2-多重装饰器"><a href="#5-2-2-多重装饰器" class="headerlink" title="5.2.2 多重装饰器"></a><strong>5.2.2 多重装饰器</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">bold</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>():</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;&lt;b&gt;<span class="subst">&#123;func()&#125;</span>&lt;/b&gt;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">italic</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>():</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;&lt;i&gt;<span class="subst">&#123;func()&#125;</span>&lt;/i&gt;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@bold</span></span><br><span class="line"><span class="meta">@italic</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello, World!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(hello())  <span class="comment"># &lt;b&gt;&lt;i&gt;Hello, World!&lt;/i&gt;&lt;/b&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-3-元类和类装饰器"><a href="#5-3-元类和类装饰器" class="headerlink" title="5.3 元类和类装饰器"></a><strong>5.3 元类和类装饰器</strong></h2><h3 id="5-3-1-元类"><a href="#5-3-1-元类" class="headerlink" title="5.3.1 元类"></a><strong>5.3.1 元类</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自定义元类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SingletonMeta</span>(<span class="title class_ inherited__">type</span>):</span><br><span class="line">    _instances = &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">cls, *args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">if</span> cls <span class="keyword">not</span> <span class="keyword">in</span> cls._instances:</span><br><span class="line">            cls._instances[cls] = <span class="built_in">super</span>().__call__(*args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> cls._instances[cls]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用元类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Database</span>(metaclass=SingletonMeta):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.connected = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">connect</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.connected = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证单例</span></span><br><span class="line">db1 = Database()</span><br><span class="line">db2 = Database()</span><br><span class="line"><span class="built_in">print</span>(db1 <span class="keyword">is</span> db2)  <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 属性验证元类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ValidateMeta</span>(<span class="title class_ inherited__">type</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls, name, bases, attrs</span>):</span><br><span class="line">        <span class="keyword">for</span> key, value <span class="keyword">in</span> attrs.items():</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(value, <span class="built_in">property</span>):</span><br><span class="line">                attrs[<span class="string">f&#x27;_validate_<span class="subst">&#123;key&#125;</span>&#x27;</span>] = cls.create_validator(key)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>().__new__(cls, name, bases, attrs)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_validator</span>(<span class="params">name</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">validator</span>(<span class="params">self, value</span>):</span><br><span class="line">            <span class="keyword">if</span> value &lt; <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">raise</span> ValueError(<span class="string">f&quot;<span class="subst">&#123;name&#125;</span> must be positive&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> value</span><br><span class="line">        <span class="keyword">return</span> validator</span><br></pre></td></tr></table></figure>

<h3 id="5-3-2-描述符"><a href="#5-3-2-描述符" class="headerlink" title="5.3.2 描述符"></a><strong>5.3.2 描述符</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 描述符示例</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Positive</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>._value = &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__get__</span>(<span class="params">self, instance, owner</span>):</span><br><span class="line">        <span class="keyword">if</span> instance <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>._value.get(instance, <span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__set__</span>(<span class="params">self, instance, value</span>):</span><br><span class="line">        <span class="keyword">if</span> value &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Value must be positive&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>._value[instance] = value</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span>:</span><br><span class="line">    x = Positive()</span><br><span class="line">    y = Positive()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x, y</span>):</span><br><span class="line">        <span class="variable language_">self</span>.x = x</span><br><span class="line">        <span class="variable language_">self</span>.y = y</span><br></pre></td></tr></table></figure>

<h2 id="5-4-并发编程"><a href="#5-4-并发编程" class="headerlink" title="5.4 并发编程"></a><strong>5.4 并发编程</strong></h2><h3 id="5-4-1-多线程"><a href="#5-4-1-多线程" class="headerlink" title="5.4.1 多线程"></a><strong>5.4.1 多线程</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 线程安全的计数器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Counter</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.value = <span class="number">0</span></span><br><span class="line">        <span class="variable language_">self</span>.lock = threading.Lock()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">increment</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="variable language_">self</span>.lock:</span><br><span class="line">            current = <span class="variable language_">self</span>.value</span><br><span class="line">            time.sleep(<span class="number">0.1</span>)  <span class="comment"># 模拟耗时操作</span></span><br><span class="line">            <span class="variable language_">self</span>.value = current + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建多个线程</span></span><br><span class="line">counter = Counter()</span><br><span class="line">threads = []</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    thread = threading.Thread(target=counter.increment)</span><br><span class="line">    threads.append(thread)</span><br><span class="line">    thread.start()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待所有线程完成</span></span><br><span class="line"><span class="keyword">for</span> thread <span class="keyword">in</span> threads:</span><br><span class="line">    thread.join()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Final count: <span class="subst">&#123;counter.value&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用线程池</span></span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">worker</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x * x</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> ThreadPoolExecutor(max_workers=<span class="number">3</span>) <span class="keyword">as</span> executor:</span><br><span class="line">    results = executor.<span class="built_in">map</span>(worker, <span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">list</span>(results))</span><br></pre></td></tr></table></figure>

<h3 id="5-4-2-多进程"><a href="#5-4-2-多进程" class="headerlink" title="5.4.2 多进程"></a><strong>5.4.2 多进程</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process, Pool</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">worker</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Worker <span class="subst">&#123;name&#125;</span>: <span class="subst">&#123;os.getpid()&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建多个进程</span></span><br><span class="line">processes = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    p = Process(target=worker, args=(i,))</span><br><span class="line">    processes.append(p)</span><br><span class="line">    p.start()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待所有进程完成</span></span><br><span class="line"><span class="keyword">for</span> p <span class="keyword">in</span> processes:</span><br><span class="line">    p.join()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用进程池</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x * x</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> Pool(<span class="number">5</span>) <span class="keyword">as</span> p:</span><br><span class="line">    <span class="built_in">print</span>(p.<span class="built_in">map</span>(f, <span class="built_in">range</span>(<span class="number">10</span>)))</span><br></pre></td></tr></table></figure>

<h3 id="5-4-3-异步编程"><a href="#5-4-3-异步编程" class="headerlink" title="5.4.3 异步编程"></a><strong>5.4.3 异步编程</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">async_hello</span>(<span class="params">name, delay</span>):</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(delay)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Hello, <span class="subst">&#123;name&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># 创建任务</span></span><br><span class="line">    tasks = [</span><br><span class="line">        async_hello(<span class="string">&quot;Alice&quot;</span>, <span class="number">2</span>),</span><br><span class="line">        async_hello(<span class="string">&quot;Bob&quot;</span>, <span class="number">1</span>),</span><br><span class="line">        async_hello(<span class="string">&quot;Charlie&quot;</span>, <span class="number">3</span>)</span><br><span class="line">    ]</span><br><span class="line">    <span class="comment"># 并发执行</span></span><br><span class="line">    <span class="keyword">await</span> asyncio.gather(*tasks)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行异步程序</span></span><br><span class="line">asyncio.run(main())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 异步上下文管理器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AsyncResource</span>:</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">__aenter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;获取资源&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">__aexit__</span>(<span class="params">self, exc_type, exc_val, exc_tb</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;释放资源&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">use_resource</span>():</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> AsyncResource() <span class="keyword">as</span> res:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;使用资源&quot;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="第六章：常用标准库"><a href="#第六章：常用标准库" class="headerlink" title="第六章：常用标准库"></a><strong>第六章：常用标准库</strong></h1><h2 id="6-1-文本处理"><a href="#6-1-文本处理" class="headerlink" title="6.1 文本处理"></a><strong>6.1 文本处理</strong></h2><h3 id="6-1-1-string-模块"><a href="#6-1-1-string-模块" class="headerlink" title="6.1.1 string 模块"></a><strong>6.1.1 string 模块</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> string</span><br><span class="line"></span><br><span class="line"><span class="comment"># 常用字符串常量</span></span><br><span class="line"><span class="built_in">print</span>(string.ascii_letters)   <span class="comment"># 所有字母</span></span><br><span class="line"><span class="built_in">print</span>(string.digits)         <span class="comment"># 数字</span></span><br><span class="line"><span class="built_in">print</span>(string.punctuation)    <span class="comment"># 标点符号</span></span><br><span class="line"><span class="built_in">print</span>(string.whitespace)     <span class="comment"># 空白字符</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串模板</span></span><br><span class="line">template = string.Template(<span class="string">&#x27;Hello, $name! You have $amount dollars.&#x27;</span>)</span><br><span class="line">result = template.substitute(name=<span class="string">&#x27;Alice&#x27;</span>, amount=<span class="number">100</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<h3 id="6-1-2-re-模块（正则表达式）"><a href="#6-1-2-re-模块（正则表达式）" class="headerlink" title="6.1.2 re 模块（正则表达式）"></a><strong>6.1.2 re 模块（正则表达式）</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;My email is user@example.com and phone is 123-456-7890&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配模式</span></span><br><span class="line">email_pattern = <span class="string">r&#x27;\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]&#123;2,&#125;\b&#x27;</span></span><br><span class="line">phone_pattern = <span class="string">r&#x27;\d&#123;3&#125;-\d&#123;3&#125;-\d&#123;4&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找所有匹配</span></span><br><span class="line">emails = re.findall(email_pattern, text)</span><br><span class="line">phones = re.findall(phone_pattern, text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换</span></span><br><span class="line">new_text = re.sub(phone_pattern, <span class="string">&#x27;***-***-****&#x27;</span>, text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分割文本</span></span><br><span class="line">words = re.split(<span class="string">r&#x27;\W+&#x27;</span>, text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用编译后的正则表达式（提高性能）</span></span><br><span class="line">email_regex = re.<span class="built_in">compile</span>(email_pattern)</span><br><span class="line">matches = email_regex.finditer(text)</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">match</span> <span class="keyword">in</span> matches:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Found email at position <span class="subst">&#123;<span class="keyword">match</span>.start()&#125;</span>: <span class="subst">&#123;<span class="keyword">match</span>.group()&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="6-2-日期和时间"><a href="#6-2-日期和时间" class="headerlink" title="6.2 日期和时间"></a><strong>6.2 日期和时间</strong></h2><h3 id="6-2-1-datetime-模块"><a href="#6-2-1-datetime-模块" class="headerlink" title="6.2.1 datetime 模块"></a><strong>6.2.1 datetime 模块</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, date, time, timedelta</span><br><span class="line"><span class="keyword">import</span> pytz  <span class="comment"># 处理时区</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前日期和时间</span></span><br><span class="line">now = datetime.now()</span><br><span class="line">today = date.today()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建日期和时间</span></span><br><span class="line">specific_date = date(<span class="number">2023</span>, <span class="number">12</span>, <span class="number">31</span>)</span><br><span class="line">specific_time = time(<span class="number">13</span>, <span class="number">30</span>, <span class="number">0</span>)</span><br><span class="line">specific_datetime = datetime(<span class="number">2023</span>, <span class="number">12</span>, <span class="number">31</span>, <span class="number">13</span>, <span class="number">30</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 日期格式化</span></span><br><span class="line">formatted = now.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span><br><span class="line">parsed = datetime.strptime(<span class="string">&quot;2023-12-31 13:30:00&quot;</span>, <span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 时间计算</span></span><br><span class="line">tomorrow = today + timedelta(days=<span class="number">1</span>)</span><br><span class="line">next_week = today + timedelta(weeks=<span class="number">1</span>)</span><br><span class="line">two_hours_later = now + timedelta(hours=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 处理时区</span></span><br><span class="line">utc = pytz.UTC</span><br><span class="line">pacific = pytz.timezone(<span class="string">&#x27;US/Pacific&#x27;</span>)</span><br><span class="line">utc_time = datetime.now(utc)</span><br><span class="line">pacific_time = utc_time.astimezone(pacific)</span><br></pre></td></tr></table></figure>

<h2 id="6-3-数据处理"><a href="#6-3-数据处理" class="headerlink" title="6.3 数据处理"></a><strong>6.3 数据处理</strong></h2><h3 id="6-3-1-json-模块"><a href="#6-3-1-json-模块" class="headerlink" title="6.3.1 json 模块"></a><strong>6.3.1 json 模块</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># Python对象转JSON</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Alice&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;age&#x27;</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="string">&#x27;cities&#x27;</span>: [<span class="string">&#x27;New York&#x27;</span>, <span class="string">&#x27;London&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;active&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">    <span class="string">&#x27;height&#x27;</span>: <span class="number">1.75</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 序列化到字符串</span></span><br><span class="line">json_str = json.dumps(data, indent=<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(json_str)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 序列化到文件</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;data.json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    json.dump(data, f, indent=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从字符串解析</span></span><br><span class="line">parsed_data = json.loads(json_str)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从文件解析</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;data.json&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    loaded_data = json.load(f)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义JSON编码</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        <span class="variable language_">self</span>.name = name</span><br><span class="line">        <span class="variable language_">self</span>.age = age</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">person_encoder</span>(<span class="params">obj</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(obj, Person):</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&#x27;name&#x27;</span>: obj.name, <span class="string">&#x27;age&#x27;</span>: obj.age&#125;</span><br><span class="line">    <span class="keyword">raise</span> TypeError(<span class="string">f&#x27;Object of type <span class="subst">&#123;<span class="built_in">type</span>(obj)&#125;</span> is not JSON serializable&#x27;</span>)</span><br><span class="line"></span><br><span class="line">person = Person(<span class="string">&#x27;Bob&#x27;</span>, <span class="number">25</span>)</span><br><span class="line">json_str = json.dumps(person, default=person_encoder)</span><br></pre></td></tr></table></figure>

<h3 id="6-3-2-csv-模块"><a href="#6-3-2-csv-模块" class="headerlink" title="6.3.2 csv 模块"></a><strong>6.3.2 csv 模块</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入CSV文件</span></span><br><span class="line">data = [</span><br><span class="line">    [<span class="string">&#x27;Name&#x27;</span>, <span class="string">&#x27;Age&#x27;</span>, <span class="string">&#x27;City&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;Alice&#x27;</span>, <span class="number">25</span>, <span class="string">&#x27;New York&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;Bob&#x27;</span>, <span class="number">30</span>, <span class="string">&#x27;London&#x27;</span>]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;data.csv&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, newline=<span class="string">&#x27;&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    writer = csv.writer(f)</span><br><span class="line">    writer.writerows(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用字典写入</span></span><br><span class="line">dict_data = [</span><br><span class="line">    &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">25</span>, <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;New York&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">30</span>, <span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;London&#x27;</span>&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;dict_data.csv&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, newline=<span class="string">&#x27;&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    fieldnames = [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;city&#x27;</span>]</span><br><span class="line">    writer = csv.DictWriter(f, fieldnames=fieldnames)</span><br><span class="line">    writer.writeheader()</span><br><span class="line">    writer.writerows(dict_data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取CSV文件</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;data.csv&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    reader = csv.reader(f)</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> reader:</span><br><span class="line">        <span class="built_in">print</span>(row)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取为字典</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;dict_data.csv&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    reader = csv.DictReader(f)</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> reader:</span><br><span class="line">        <span class="built_in">print</span>(row[<span class="string">&#x27;name&#x27;</span>], row[<span class="string">&#x27;age&#x27;</span>])</span><br></pre></td></tr></table></figure>

<h2 id="6-4-系统和OS操作"><a href="#6-4-系统和OS操作" class="headerlink" title="6.4 系统和OS操作"></a><strong>6.4 系统和OS操作</strong></h2><h3 id="6-4-1-os-和-sys-模块"><a href="#6-4-1-os-和-sys-模块" class="headerlink" title="6.4.1 os 和 sys 模块"></a><strong>6.4.1 os 和 sys 模块</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> platform</span><br><span class="line"></span><br><span class="line"><span class="comment"># 系统信息</span></span><br><span class="line"><span class="built_in">print</span>(sys.platform)          <span class="comment"># 操作系统平台</span></span><br><span class="line"><span class="built_in">print</span>(sys.version)          <span class="comment"># Python版本</span></span><br><span class="line"><span class="built_in">print</span>(platform.system())    <span class="comment"># 操作系统名称</span></span><br><span class="line"><span class="built_in">print</span>(os.name)             <span class="comment"># 操作系统类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 环境变量</span></span><br><span class="line"><span class="built_in">print</span>(os.environ.get(<span class="string">&#x27;PATH&#x27;</span>))</span><br><span class="line">os.environ[<span class="string">&#x27;MY_VAR&#x27;</span>] = <span class="string">&#x27;value&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 路径操作</span></span><br><span class="line">current_dir = os.getcwd()</span><br><span class="line">os.chdir(<span class="string">&#x27;..&#x27;</span>)             <span class="comment"># 改变当前目录</span></span><br><span class="line">path = os.path.join(<span class="string">&#x27;folder&#x27;</span>, <span class="string">&#x27;subfolder&#x27;</span>, <span class="string">&#x27;file.txt&#x27;</span>)</span><br><span class="line">abs_path = os.path.abspath(path)</span><br><span class="line">norm_path = os.path.normpath(path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 目录操作</span></span><br><span class="line">os.makedirs(<span class="string">&#x27;new/nested/directory&#x27;</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line">os.removedirs(<span class="string">&#x27;new/nested/directory&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(<span class="string">&#x27;.&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;当前目录: <span class="subst">&#123;root&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;子目录: <span class="subst">&#123;dirs&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;文件: <span class="subst">&#123;files&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进程管理</span></span><br><span class="line">pid = os.getpid()          <span class="comment"># 当前进程ID</span></span><br><span class="line">os.system(<span class="string">&#x27;echo Hello&#x27;</span>)    <span class="comment"># 执行系统命令</span></span><br></pre></td></tr></table></figure>

<h3 id="6-4-2-argparse-模块"><a href="#6-4-2-argparse-模块" class="headerlink" title="6.4.2 argparse 模块"></a><strong>6.4.2 argparse 模块</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    parser = argparse.ArgumentParser(description=<span class="string">&#x27;示例命令行程序&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 添加参数</span></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;name&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;用户名&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-a&#x27;</span>, <span class="string">&#x27;--age&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, <span class="built_in">help</span>=<span class="string">&#x27;年龄&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-v&#x27;</span>, <span class="string">&#x27;--verbose&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;显示详细信息&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 解析参数</span></span><br><span class="line">    args = parser.parse_args()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 使用参数</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Hello, <span class="subst">&#123;args.name&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> args.age:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;You are <span class="subst">&#123;args.age&#125;</span> years old&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> args.verbose:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Verbose mode enabled&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h3 id="6-4-3-logging-模块"><a href="#6-4-3-logging-模块" class="headerlink" title="6.4.3 logging 模块"></a><strong>6.4.3 logging 模块</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line"><span class="comment"># 基本配置</span></span><br><span class="line">logging.basicConfig(</span><br><span class="line">    level=logging.DEBUG,</span><br><span class="line">    <span class="built_in">format</span>=<span class="string">&#x27;%(asctime)s - %(name)s - %(levelname)s - %(message)s&#x27;</span>,</span><br><span class="line">    filename=<span class="string">&#x27;app.log&#x27;</span>,</span><br><span class="line">    filemode=<span class="string">&#x27;w&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建logger</span></span><br><span class="line">logger = logging.getLogger(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建控制台处理器</span></span><br><span class="line">console_handler = logging.StreamHandler()</span><br><span class="line">console_handler.setLevel(logging.INFO)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建文件处理器</span></span><br><span class="line">file_handler = logging.FileHandler(<span class="string">&#x27;error.log&#x27;</span>)</span><br><span class="line">file_handler.setLevel(logging.ERROR)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建格式器</span></span><br><span class="line">formatter = logging.Formatter(<span class="string">&#x27;%(asctime)s - %(name)s - %(levelname)s - %(message)s&#x27;</span>)</span><br><span class="line">console_handler.setFormatter(formatter)</span><br><span class="line">file_handler.setFormatter(formatter)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加处理器到logger</span></span><br><span class="line">logger.addHandler(console_handler)</span><br><span class="line">logger.addHandler(file_handler)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 记录不同级别的日志</span></span><br><span class="line">logger.debug(<span class="string">&#x27;调试信息&#x27;</span>)</span><br><span class="line">logger.info(<span class="string">&#x27;一般信息&#x27;</span>)</span><br><span class="line">logger.warning(<span class="string">&#x27;警告信息&#x27;</span>)</span><br><span class="line">logger.error(<span class="string">&#x27;错误信息&#x27;</span>)</span><br><span class="line">logger.critical(<span class="string">&#x27;严重错误&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="第七章：算法与数据结构"><a href="#第七章：算法与数据结构" class="headerlink" title="第七章：算法与数据结构"></a><strong>第七章：算法与数据结构</strong></h1><h2 id="7-1-基本数据结构实现"><a href="#7-1-基本数据结构实现" class="headerlink" title="7.1 基本数据结构实现"></a><strong>7.1 基本数据结构实现</strong></h2><h3 id="7-1-1-链表"><a href="#7-1-1-链表" class="headerlink" title="7.1.1 链表"></a><strong>7.1.1 链表</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, data</span>):</span><br><span class="line">        <span class="variable language_">self</span>.data = data</span><br><span class="line">        <span class="variable language_">self</span>.<span class="built_in">next</span> = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LinkedList</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.head = <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">append</span>(<span class="params">self, data</span>):</span><br><span class="line">        new_node = Node(data)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.head:</span><br><span class="line">            <span class="variable language_">self</span>.head = new_node</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        current = <span class="variable language_">self</span>.head</span><br><span class="line">        <span class="keyword">while</span> current.<span class="built_in">next</span>:</span><br><span class="line">            current = current.<span class="built_in">next</span></span><br><span class="line">        current.<span class="built_in">next</span> = new_node</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">prepend</span>(<span class="params">self, data</span>):</span><br><span class="line">        new_node = Node(data)</span><br><span class="line">        new_node.<span class="built_in">next</span> = <span class="variable language_">self</span>.head</span><br><span class="line">        <span class="variable language_">self</span>.head = new_node</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">delete</span>(<span class="params">self, data</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.head:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.head.data == data:</span><br><span class="line">            <span class="variable language_">self</span>.head = <span class="variable language_">self</span>.head.<span class="built_in">next</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        current = <span class="variable language_">self</span>.head</span><br><span class="line">        <span class="keyword">while</span> current.<span class="built_in">next</span>:</span><br><span class="line">            <span class="keyword">if</span> current.<span class="built_in">next</span>.data == data:</span><br><span class="line">                current.<span class="built_in">next</span> = current.<span class="built_in">next</span>.<span class="built_in">next</span></span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            current = current.<span class="built_in">next</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">display</span>(<span class="params">self</span>):</span><br><span class="line">        elements = []</span><br><span class="line">        current = <span class="variable language_">self</span>.head</span><br><span class="line">        <span class="keyword">while</span> current:</span><br><span class="line">            elements.append(current.data)</span><br><span class="line">            current = current.<span class="built_in">next</span></span><br><span class="line">        <span class="keyword">return</span> elements</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line">ll = LinkedList()</span><br><span class="line">ll.append(<span class="number">1</span>)</span><br><span class="line">ll.append(<span class="number">2</span>)</span><br><span class="line">ll.prepend(<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(ll.display())  <span class="comment"># [0, 1, 2]</span></span><br><span class="line">ll.delete(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(ll.display())  <span class="comment"># [0, 2]</span></span><br></pre></td></tr></table></figure>

<h3 id="7-1-2-栈和队列"><a href="#7-1-2-栈和队列" class="headerlink" title="7.1.2 栈和队列"></a><strong>7.1.2 栈和队列</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 栈实现</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.items = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">push</span>(<span class="params">self, item</span>):</span><br><span class="line">        <span class="variable language_">self</span>.items.append(item)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">pop</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.is_empty():</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.items.pop()</span><br><span class="line">        <span class="keyword">raise</span> IndexError(<span class="string">&quot;Stack is empty&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">peek</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.is_empty():</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.items[-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">raise</span> IndexError(<span class="string">&quot;Stack is empty&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">is_empty</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(<span class="variable language_">self</span>.items) == <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">size</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(<span class="variable language_">self</span>.items)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 队列实现</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Queue</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.items = deque()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">enqueue</span>(<span class="params">self, item</span>):</span><br><span class="line">        <span class="variable language_">self</span>.items.append(item)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dequeue</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.is_empty():</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.items.popleft()</span><br><span class="line">        <span class="keyword">raise</span> IndexError(<span class="string">&quot;Queue is empty&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">front</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.is_empty():</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.items[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">raise</span> IndexError(<span class="string">&quot;Queue is empty&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">is_empty</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(<span class="variable language_">self</span>.items) == <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">size</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(<span class="variable language_">self</span>.items)</span><br></pre></td></tr></table></figure>

<h3 id="7-1-3-二叉树"><a href="#7-1-3-二叉树" class="headerlink" title="7.1.3 二叉树"></a><strong>7.1.3 二叉树</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TreeNode</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, data</span>):</span><br><span class="line">        <span class="variable language_">self</span>.data = data</span><br><span class="line">        <span class="variable language_">self</span>.left = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>.right = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BinaryTree</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.root = <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">insert</span>(<span class="params">self, data</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.root:</span><br><span class="line">            <span class="variable language_">self</span>.root = TreeNode(data)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="variable language_">self</span>._insert_recursive(<span class="variable language_">self</span>.root, data)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_insert_recursive</span>(<span class="params">self, node, data</span>):</span><br><span class="line">        <span class="keyword">if</span> data &lt; node.data:</span><br><span class="line">            <span class="keyword">if</span> node.left <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                node.left = TreeNode(data)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="variable language_">self</span>._insert_recursive(node.left, data)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> node.right <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                node.right = TreeNode(data)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="variable language_">self</span>._insert_recursive(node.right, data)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 中序遍历</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inorder</span>(<span class="params">self</span>):</span><br><span class="line">        elements = []</span><br><span class="line">        <span class="variable language_">self</span>._inorder_recursive(<span class="variable language_">self</span>.root, elements)</span><br><span class="line">        <span class="keyword">return</span> elements</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_inorder_recursive</span>(<span class="params">self, node, elements</span>):</span><br><span class="line">        <span class="keyword">if</span> node:</span><br><span class="line">            <span class="variable language_">self</span>._inorder_recursive(node.left, elements)</span><br><span class="line">            elements.append(node.data)</span><br><span class="line">            <span class="variable language_">self</span>._inorder_recursive(node.right, elements)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 前序遍历</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">preorder</span>(<span class="params">self</span>):</span><br><span class="line">        elements = []</span><br><span class="line">        <span class="variable language_">self</span>._preorder_recursive(<span class="variable language_">self</span>.root, elements)</span><br><span class="line">        <span class="keyword">return</span> elements</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_preorder_recursive</span>(<span class="params">self, node, elements</span>):</span><br><span class="line">        <span class="keyword">if</span> node:</span><br><span class="line">            elements.append(node.data)</span><br><span class="line">            <span class="variable language_">self</span>._preorder_recursive(node.left, elements)</span><br><span class="line">            <span class="variable language_">self</span>._preorder_recursive(node.right, elements)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 后序遍历</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">postorder</span>(<span class="params">self</span>):</span><br><span class="line">        elements = []</span><br><span class="line">        <span class="variable language_">self</span>._postorder_recursive(<span class="variable language_">self</span>.root, elements)</span><br><span class="line">        <span class="keyword">return</span> elements</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_postorder_recursive</span>(<span class="params">self, node, elements</span>):</span><br><span class="line">        <span class="keyword">if</span> node:</span><br><span class="line">            <span class="variable language_">self</span>._postorder_recursive(node.left, elements)</span><br><span class="line">            <span class="variable language_">self</span>._postorder_recursive(node.right, elements)</span><br><span class="line">            elements.append(node.data)</span><br></pre></td></tr></table></figure>

<h2 id="7-2-排序算法"><a href="#7-2-排序算法" class="headerlink" title="7.2 排序算法"></a><strong>7.2 排序算法</strong></h2><h3 id="7-2-1-基本排序算法"><a href="#7-2-1-基本排序算法" class="headerlink" title="7.2.1 基本排序算法"></a><strong>7.2.1 基本排序算法</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 冒泡排序</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bubble_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    n = <span class="built_in">len</span>(arr)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, n-i-<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> arr[j] &gt; arr[j+<span class="number">1</span>]:</span><br><span class="line">                arr[j], arr[j+<span class="number">1</span>] = arr[j+<span class="number">1</span>], arr[j]</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择排序</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">selection_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    n = <span class="built_in">len</span>(arr)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        min_idx = i</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i+<span class="number">1</span>, n):</span><br><span class="line">            <span class="keyword">if</span> arr[j] &lt; arr[min_idx]:</span><br><span class="line">                min_idx = j</span><br><span class="line">        arr[i], arr[min_idx] = arr[min_idx], arr[i]</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line"></span><br><span class="line"><span class="comment"># 插入排序</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">insertion_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(arr)):</span><br><span class="line">        key = arr[i]</span><br><span class="line">        j = i-<span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> j &gt;= <span class="number">0</span> <span class="keyword">and</span> arr[j] &gt; key:</span><br><span class="line">            arr[j+<span class="number">1</span>] = arr[j]</span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">        arr[j+<span class="number">1</span>] = key</span><br><span class="line">    <span class="keyword">return</span> arr</span><br></pre></td></tr></table></figure>

<h3 id="7-2-2-高级排序算法"><a href="#7-2-2-高级排序算法" class="headerlink" title="7.2.2 高级排序算法"></a><strong>7.2.2 高级排序算法</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 快速排序</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">quick_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(arr) &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> arr</span><br><span class="line">    </span><br><span class="line">    pivot = arr[<span class="built_in">len</span>(arr) // <span class="number">2</span>]</span><br><span class="line">    left = [x <span class="keyword">for</span> x <span class="keyword">in</span> arr <span class="keyword">if</span> x &lt; pivot]</span><br><span class="line">    middle = [x <span class="keyword">for</span> x <span class="keyword">in</span> arr <span class="keyword">if</span> x == pivot]</span><br><span class="line">    right = [x <span class="keyword">for</span> x <span class="keyword">in</span> arr <span class="keyword">if</span> x &gt; pivot]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> quick_sort(left) + middle + quick_sort(right)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 归并排序</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">merge_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(arr) &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> arr</span><br><span class="line">    </span><br><span class="line">    mid = <span class="built_in">len</span>(arr) // <span class="number">2</span></span><br><span class="line">    left = merge_sort(arr[:mid])</span><br><span class="line">    right = merge_sort(arr[mid:])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> merge(left, right)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">merge</span>(<span class="params">left, right</span>):</span><br><span class="line">    result = []</span><br><span class="line">    i = j = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(left) <span class="keyword">and</span> j &lt; <span class="built_in">len</span>(right):</span><br><span class="line">        <span class="keyword">if</span> left[i] &lt;= right[j]:</span><br><span class="line">            result.append(left[i])</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            result.append(right[j])</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    result.extend(left[i:])</span><br><span class="line">    result.extend(right[j:])</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="comment"># 堆排序</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">heapify</span>(<span class="params">arr, n, i</span>):</span><br><span class="line">    largest = i</span><br><span class="line">    left = <span class="number">2</span> * i + <span class="number">1</span></span><br><span class="line">    right = <span class="number">2</span> * i + <span class="number">2</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> left &lt; n <span class="keyword">and</span> arr[left] &gt; arr[largest]:</span><br><span class="line">        largest = left</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> right &lt; n <span class="keyword">and</span> arr[right] &gt; arr[largest]:</span><br><span class="line">        largest = right</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> largest != i:</span><br><span class="line">        arr[i], arr[largest] = arr[largest], arr[i]</span><br><span class="line">        heapify(arr, n, largest)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">heap_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    n = <span class="built_in">len</span>(arr)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n // <span class="number">2</span> - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">        heapify(arr, n, i)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n-<span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">        arr[<span class="number">0</span>], arr[i] = arr[i], arr[<span class="number">0</span>]</span><br><span class="line">        heapify(arr, i, <span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> arr</span><br></pre></td></tr></table></figure>

<h2 id="7-3-搜索算法"><a href="#7-3-搜索算法" class="headerlink" title="7.3 搜索算法"></a><strong>7.3 搜索算法</strong></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 二分查找</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">binary_search</span>(<span class="params">arr, target</span>):</span><br><span class="line">    left, right = <span class="number">0</span>, <span class="built_in">len</span>(arr) - <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> left &lt;= right:</span><br><span class="line">        mid = (left + right) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> arr[mid] == target:</span><br><span class="line">            <span class="keyword">return</span> mid</span><br><span class="line">        <span class="keyword">elif</span> arr[mid] &lt; target:</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            right = mid - <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 深度优先搜索 (DFS)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">graph, start, visited=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">if</span> visited <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        visited = <span class="built_in">set</span>()</span><br><span class="line">    </span><br><span class="line">    visited.add(start)</span><br><span class="line">    <span class="built_in">print</span>(start, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> next_vertex <span class="keyword">in</span> graph[start]:</span><br><span class="line">        <span class="keyword">if</span> next_vertex <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">            dfs(graph, next_vertex, visited)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> visited</span><br><span class="line"></span><br><span class="line"><span class="comment"># 广度优先搜索 (BFS)</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bfs</span>(<span class="params">graph, start</span>):</span><br><span class="line">    visited = <span class="built_in">set</span>([start])</span><br><span class="line">    queue = deque([start])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> queue:</span><br><span class="line">        vertex = queue.popleft()</span><br><span class="line">        <span class="built_in">print</span>(vertex, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> neighbor <span class="keyword">in</span> graph[vertex]:</span><br><span class="line">            <span class="keyword">if</span> neighbor <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                visited.add(neighbor)</span><br><span class="line">                queue.append(neighbor)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> visited</span><br></pre></td></tr></table></figure>

<h1 id="第八章：动态规划与贪心算法"><a href="#第八章：动态规划与贪心算法" class="headerlink" title="第八章：动态规划与贪心算法"></a><strong>第八章：动态规划与贪心算法</strong></h1><h2 id="8-1-动态规划基础"><a href="#8-1-动态规划基础" class="headerlink" title="8.1 动态规划基础"></a><strong>8.1 动态规划基础</strong></h2><h3 id="8-1-1-基本概念与实现方法"><a href="#8-1-1-基本概念与实现方法" class="headerlink" title="8.1.1 基本概念与实现方法"></a><strong>8.1.1 基本概念与实现方法</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 斐波那契数列 - 展示不同实现方法</span></span><br><span class="line"><span class="comment"># 1. 递归实现（效率低）</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fib_recursive</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">    <span class="keyword">return</span> fib_recursive(n-<span class="number">1</span>) + fib_recursive(n-<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 记忆化递归（自顶向下）</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fib_memo</span>(<span class="params">n, memo=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">if</span> memo <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        memo = &#123;&#125;</span><br><span class="line">    <span class="keyword">if</span> n <span class="keyword">in</span> memo:</span><br><span class="line">        <span class="keyword">return</span> memo[n]</span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">    memo[n] = fib_memo(n-<span class="number">1</span>, memo) + fib_memo(n-<span class="number">2</span>, memo)</span><br><span class="line">    <span class="keyword">return</span> memo[n]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 动态规划（自底向上）</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fib_dp</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">    dp = [<span class="number">0</span>] * (n + <span class="number">1</span>)</span><br><span class="line">    dp[<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, n + <span class="number">1</span>):</span><br><span class="line">        dp[i] = dp[i-<span class="number">1</span>] + dp[i-<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">return</span> dp[n]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 空间优化的动态规划</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fib_optimized</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">    prev2, prev1 = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, n + <span class="number">1</span>):</span><br><span class="line">        curr = prev1 + prev2</span><br><span class="line">        prev2, prev1 = prev1, curr</span><br><span class="line">    <span class="keyword">return</span> prev1</span><br></pre></td></tr></table></figure>

<h3 id="8-1-2-经典动态规划问题"><a href="#8-1-2-经典动态规划问题" class="headerlink" title="8.1.2 经典动态规划问题"></a><strong>8.1.2 经典动态规划问题</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 最长递增子序列 (LIS)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">longest_increasing_subsequence</span>(<span class="params">arr</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> arr:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    n = <span class="built_in">len</span>(arr)</span><br><span class="line">    dp = [<span class="number">1</span>] * n  <span class="comment"># dp[i]表示以arr[i]结尾的LIS长度</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i):</span><br><span class="line">            <span class="keyword">if</span> arr[i] &gt; arr[j]:</span><br><span class="line">                dp[i] = <span class="built_in">max</span>(dp[i], dp[j] + <span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(dp)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 编辑距离</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">edit_distance</span>(<span class="params">word1, word2</span>):</span><br><span class="line">    m, n = <span class="built_in">len</span>(word1), <span class="built_in">len</span>(word2)</span><br><span class="line">    dp = [[<span class="number">0</span>] * (n + <span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(m + <span class="number">1</span>)]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 初始化边界</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m + <span class="number">1</span>):</span><br><span class="line">        dp[i][<span class="number">0</span>] = i</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n + <span class="number">1</span>):</span><br><span class="line">        dp[<span class="number">0</span>][j] = j</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 填充dp表</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, m + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> word1[i-<span class="number">1</span>] == word2[j-<span class="number">1</span>]:</span><br><span class="line">                dp[i][j] = dp[i-<span class="number">1</span>][j-<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                dp[i][j] = <span class="built_in">min</span>(dp[i-<span class="number">1</span>][j],      <span class="comment"># 删除</span></span><br><span class="line">                              dp[i][j-<span class="number">1</span>],        <span class="comment"># 插入</span></span><br><span class="line">                              dp[i-<span class="number">1</span>][j-<span class="number">1</span>]) + <span class="number">1</span>  <span class="comment"># 替换</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> dp[m][n]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 背包问题</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">knapsack</span>(<span class="params">weights, values, capacity</span>):</span><br><span class="line">    n = <span class="built_in">len</span>(weights)</span><br><span class="line">    dp = [[<span class="number">0</span>] * (capacity + <span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n + <span class="number">1</span>)]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> w <span class="keyword">in</span> <span class="built_in">range</span>(capacity + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> weights[i-<span class="number">1</span>] &lt;= w:</span><br><span class="line">                dp[i][w] = <span class="built_in">max</span>(dp[i-<span class="number">1</span>][w],</span><br><span class="line">                              dp[i-<span class="number">1</span>][w-weights[i-<span class="number">1</span>]] + values[i-<span class="number">1</span>])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                dp[i][w] = dp[i-<span class="number">1</span>][w]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> dp[n][capacity]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 最长公共子序列 (LCS)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">longest_common_subsequence</span>(<span class="params">text1, text2</span>):</span><br><span class="line">    m, n = <span class="built_in">len</span>(text1), <span class="built_in">len</span>(text2)</span><br><span class="line">    dp = [[<span class="number">0</span>] * (n + <span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(m + <span class="number">1</span>)]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, m + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> text1[i-<span class="number">1</span>] == text2[j-<span class="number">1</span>]:</span><br><span class="line">                dp[i][j] = dp[i-<span class="number">1</span>][j-<span class="number">1</span>] + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                dp[i][j] = <span class="built_in">max</span>(dp[i-<span class="number">1</span>][j], dp[i][j-<span class="number">1</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 重构最长公共子序列</span></span><br><span class="line">    lcs = []</span><br><span class="line">    i, j = m, n</span><br><span class="line">    <span class="keyword">while</span> i &gt; <span class="number">0</span> <span class="keyword">and</span> j &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">if</span> text1[i-<span class="number">1</span>] == text2[j-<span class="number">1</span>]:</span><br><span class="line">            lcs.append(text1[i-<span class="number">1</span>])</span><br><span class="line">            i -= <span class="number">1</span></span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> dp[i-<span class="number">1</span>][j] &gt; dp[i][j-<span class="number">1</span>]:</span><br><span class="line">            i -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(<span class="built_in">reversed</span>(lcs))</span><br></pre></td></tr></table></figure>

<h2 id="8-2-贪心算法"><a href="#8-2-贪心算法" class="headerlink" title="8.2 贪心算法"></a><strong>8.2 贪心算法</strong></h2><h3 id="8-2-1-基本贪心问题"><a href="#8-2-1-基本贪心问题" class="headerlink" title="8.2.1 基本贪心问题"></a><strong>8.2.1 基本贪心问题</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 找零钱问题</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">make_change</span>(<span class="params">coins, amount</span>):</span><br><span class="line">    coins.sort(reverse=<span class="literal">True</span>)  <span class="comment"># 从大到小排序</span></span><br><span class="line">    result = []</span><br><span class="line">    remaining = amount</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> coin <span class="keyword">in</span> coins:</span><br><span class="line">        <span class="keyword">while</span> remaining &gt;= coin:</span><br><span class="line">            result.append(coin)</span><br><span class="line">            remaining -= coin</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result <span class="keyword">if</span> remaining == <span class="number">0</span> <span class="keyword">else</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 活动选择问题</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">activity_selection</span>(<span class="params">start, finish</span>):</span><br><span class="line">    n = <span class="built_in">len</span>(start)</span><br><span class="line">    <span class="comment"># 按结束时间排序</span></span><br><span class="line">    activities = <span class="built_in">sorted</span>(<span class="built_in">zip</span>(start, finish), key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>])</span><br><span class="line">    selected = [activities[<span class="number">0</span>]]</span><br><span class="line">    last_finish = activities[<span class="number">0</span>][<span class="number">1</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n):</span><br><span class="line">        <span class="keyword">if</span> activities[i][<span class="number">0</span>] &gt;= last_finish:</span><br><span class="line">            selected.append(activities[i])</span><br><span class="line">            last_finish = activities[i][<span class="number">1</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> selected</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 区间调度问题</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">interval_scheduling</span>(<span class="params">intervals</span>):</span><br><span class="line">    <span class="comment"># 按结束时间排序</span></span><br><span class="line">    intervals.sort(key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>])</span><br><span class="line">    selected = [intervals[<span class="number">0</span>]]</span><br><span class="line">    last_end = intervals[<span class="number">0</span>][<span class="number">1</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> interval <span class="keyword">in</span> intervals[<span class="number">1</span>:]:</span><br><span class="line">        <span class="keyword">if</span> interval[<span class="number">0</span>] &gt;= last_end:</span><br><span class="line">            selected.append(interval)</span><br><span class="line">            last_end = interval[<span class="number">1</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> selected</span><br></pre></td></tr></table></figure>

<h3 id="8-2-2-高级贪心问题"><a href="#8-2-2-高级贪心问题" class="headerlink" title="8.2.2 高级贪心问题"></a><strong>8.2.2 高级贪心问题</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. Huffman编码</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HuffmanNode</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, char, freq</span>):</span><br><span class="line">        <span class="variable language_">self</span>.char = char</span><br><span class="line">        <span class="variable language_">self</span>.freq = freq</span><br><span class="line">        <span class="variable language_">self</span>.left = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>.right = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_huffman_tree</span>(<span class="params">chars, freqs</span>):</span><br><span class="line">    nodes = [HuffmanNode(c, f) <span class="keyword">for</span> c, f <span class="keyword">in</span> <span class="built_in">zip</span>(chars, freqs)]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">len</span>(nodes) &gt; <span class="number">1</span>:</span><br><span class="line">        <span class="comment"># 获取频率最小的两个节点</span></span><br><span class="line">        nodes.sort(key=<span class="keyword">lambda</span> x: x.freq)</span><br><span class="line">        left = nodes.pop(<span class="number">0</span>)</span><br><span class="line">        right = nodes.pop(<span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 创建新的内部节点</span></span><br><span class="line">        internal = HuffmanNode(<span class="literal">None</span>, left.freq + right.freq)</span><br><span class="line">        internal.left = left</span><br><span class="line">        internal.right = right</span><br><span class="line">        </span><br><span class="line">        nodes.append(internal)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> nodes[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_huffman_codes</span>(<span class="params">root, code=<span class="string">&quot;&quot;</span>, codes=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">if</span> codes <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        codes = &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> root:</span><br><span class="line">        <span class="keyword">if</span> root.char:</span><br><span class="line">            codes[root.char] = code</span><br><span class="line">        get_huffman_codes(root.left, code + <span class="string">&quot;0&quot;</span>, codes)</span><br><span class="line">        get_huffman_codes(root.right, code + <span class="string">&quot;1&quot;</span>, codes)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> codes</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 最小生成树 (Prim算法)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">prim_mst</span>(<span class="params">graph</span>):</span><br><span class="line">    n = <span class="built_in">len</span>(graph)</span><br><span class="line">    selected = [<span class="literal">False</span>] * n</span><br><span class="line">    selected[<span class="number">0</span>] = <span class="literal">True</span></span><br><span class="line">    edges = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n - <span class="number">1</span>):</span><br><span class="line">        minimum = <span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)</span><br><span class="line">        x = y = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            <span class="keyword">if</span> selected[i]:</span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">not</span> selected[j] <span class="keyword">and</span> graph[i][j]:</span><br><span class="line">                        <span class="keyword">if</span> graph[i][j] &lt; minimum:</span><br><span class="line">                            minimum = graph[i][j]</span><br><span class="line">                            x, y = i, j</span><br><span class="line">        </span><br><span class="line">        selected[y] = <span class="literal">True</span></span><br><span class="line">        edges.append((x, y, graph[x][y]))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> edges</span><br></pre></td></tr></table></figure>

<h1 id="第九章：高级算法与技巧"><a href="#第九章：高级算法与技巧" class="headerlink" title="第九章：高级算法与技巧"></a><strong>第九章：高级算法与技巧</strong></h1><h2 id="9-1-图论算法"><a href="#9-1-图论算法" class="headerlink" title="9.1 图论算法"></a><strong>9.1 图论算法</strong></h2><h3 id="9-1-1-图的表示与基本操作"><a href="#9-1-1-图的表示与基本操作" class="headerlink" title="9.1.1 图的表示与基本操作"></a><strong>9.1.1 图的表示与基本操作</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 图的邻接表表示</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Graph</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.graph = &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_vertex</span>(<span class="params">self, vertex</span>):</span><br><span class="line">        <span class="keyword">if</span> vertex <span class="keyword">not</span> <span class="keyword">in</span> <span class="variable language_">self</span>.graph:</span><br><span class="line">            <span class="variable language_">self</span>.graph[vertex] = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_edge</span>(<span class="params">self, v1, v2, directed=<span class="literal">False</span></span>):</span><br><span class="line">        <span class="keyword">if</span> v1 <span class="keyword">not</span> <span class="keyword">in</span> <span class="variable language_">self</span>.graph:</span><br><span class="line">            <span class="variable language_">self</span>.add_vertex(v1)</span><br><span class="line">        <span class="keyword">if</span> v2 <span class="keyword">not</span> <span class="keyword">in</span> <span class="variable language_">self</span>.graph:</span><br><span class="line">            <span class="variable language_">self</span>.add_vertex(v2)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.graph[v1].append(v2)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> directed:</span><br><span class="line">            <span class="variable language_">self</span>.graph[v2].append(v1)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_vertices</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">list</span>(<span class="variable language_">self</span>.graph.keys())</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_edges</span>(<span class="params">self</span>):</span><br><span class="line">        edges = []</span><br><span class="line">        <span class="keyword">for</span> vertex <span class="keyword">in</span> <span class="variable language_">self</span>.graph:</span><br><span class="line">            <span class="keyword">for</span> neighbor <span class="keyword">in</span> <span class="variable language_">self</span>.graph[vertex]:</span><br><span class="line">                edges.append((vertex, neighbor))</span><br><span class="line">        <span class="keyword">return</span> edges</span><br></pre></td></tr></table></figure>

<h3 id="9-1-2-最短路径算法"><a href="#9-1-2-最短路径算法" class="headerlink" title="9.1.2 最短路径算法"></a><strong>9.1.2 最短路径算法</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Dijkstra最短路径算法</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dijkstra</span>(<span class="params">graph, start</span>):</span><br><span class="line">    distances = &#123;vertex: <span class="built_in">float</span>(<span class="string">&#x27;infinity&#x27;</span>) <span class="keyword">for</span> vertex <span class="keyword">in</span> graph&#125;</span><br><span class="line">    distances[start] = <span class="number">0</span></span><br><span class="line">    unvisited = <span class="built_in">set</span>(graph.keys())</span><br><span class="line">    path = &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> unvisited:</span><br><span class="line">        current = <span class="built_in">min</span>(unvisited, key=<span class="keyword">lambda</span> vertex: distances[vertex])</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> distances[current] == <span class="built_in">float</span>(<span class="string">&#x27;infinity&#x27;</span>):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">for</span> neighbor, weight <span class="keyword">in</span> graph[current].items():</span><br><span class="line">            distance = distances[current] + weight</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> distance &lt; distances[neighbor]:</span><br><span class="line">                distances[neighbor] = distance</span><br><span class="line">                path[neighbor] = current</span><br><span class="line">                </span><br><span class="line">        unvisited.remove(current)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> distances, path</span><br><span class="line"></span><br><span class="line"><span class="comment"># Floyd-Warshall算法</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">floyd_warshall</span>(<span class="params">graph</span>):</span><br><span class="line">    vertices = <span class="built_in">list</span>(graph.keys())</span><br><span class="line">    n = <span class="built_in">len</span>(vertices)</span><br><span class="line">    dist = &#123;i: &#123;j: <span class="built_in">float</span>(<span class="string">&#x27;infinity&#x27;</span>) <span class="keyword">for</span> j <span class="keyword">in</span> vertices&#125; <span class="keyword">for</span> i <span class="keyword">in</span> vertices&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 初始化距离矩阵</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> vertices:</span><br><span class="line">        dist[i][i] = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> graph[i]:</span><br><span class="line">            dist[i][j] = graph[i][j]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 核心算法</span></span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> vertices:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> vertices:</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> vertices:</span><br><span class="line">                <span class="keyword">if</span> dist[i][k] + dist[k][j] &lt; dist[i][j]:</span><br><span class="line">                    dist[i][j] = dist[i][k] + dist[k][j]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> dist</span><br></pre></td></tr></table></figure>

<h3 id="9-1-3-最小生成树算法"><a href="#9-1-3-最小生成树算法" class="headerlink" title="9.1.3 最小生成树算法"></a><strong>9.1.3 最小生成树算法</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Kruskal算法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UnionFind</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, vertices</span>):</span><br><span class="line">        <span class="variable language_">self</span>.parent = &#123;v: v <span class="keyword">for</span> v <span class="keyword">in</span> vertices&#125;</span><br><span class="line">        <span class="variable language_">self</span>.rank = &#123;v: <span class="number">0</span> <span class="keyword">for</span> v <span class="keyword">in</span> vertices&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">find</span>(<span class="params">self, item</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.parent[item] != item:</span><br><span class="line">            <span class="variable language_">self</span>.parent[item] = <span class="variable language_">self</span>.find(<span class="variable language_">self</span>.parent[item])</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.parent[item]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">union</span>(<span class="params">self, x, y</span>):</span><br><span class="line">        xroot, yroot = <span class="variable language_">self</span>.find(x), <span class="variable language_">self</span>.find(y)</span><br><span class="line">        <span class="keyword">if</span> xroot == yroot:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.rank[xroot] &lt; <span class="variable language_">self</span>.rank[yroot]:</span><br><span class="line">            <span class="variable language_">self</span>.parent[xroot] = yroot</span><br><span class="line">        <span class="keyword">elif</span> <span class="variable language_">self</span>.rank[xroot] &gt; <span class="variable language_">self</span>.rank[yroot]:</span><br><span class="line">            <span class="variable language_">self</span>.parent[yroot] = xroot</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="variable language_">self</span>.parent[yroot] = xroot</span><br><span class="line">            <span class="variable language_">self</span>.rank[xroot] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">kruskal</span>(<span class="params">graph</span>):</span><br><span class="line">    edges = []</span><br><span class="line">    <span class="keyword">for</span> u <span class="keyword">in</span> graph:</span><br><span class="line">        <span class="keyword">for</span> v, weight <span class="keyword">in</span> graph[u].items():</span><br><span class="line">            edges.append((weight, u, v))</span><br><span class="line">    </span><br><span class="line">    edges.sort()  <span class="comment"># 按权重排序</span></span><br><span class="line">    vertices = <span class="built_in">list</span>(graph.keys())</span><br><span class="line">    uf = UnionFind(vertices)</span><br><span class="line">    mst = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> weight, u, v <span class="keyword">in</span> edges:</span><br><span class="line">        <span class="keyword">if</span> uf.find(u) != uf.find(v):</span><br><span class="line">            uf.union(u, v)</span><br><span class="line">            mst.append((u, v, weight))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> mst</span><br></pre></td></tr></table></figure>

<h2 id="9-2-高级数据结构"><a href="#9-2-高级数据结构" class="headerlink" title="9.2 高级数据结构"></a><strong>9.2 高级数据结构</strong></h2><h3 id="9-2-1-平衡二叉树（AVL树）"><a href="#9-2-1-平衡二叉树（AVL树）" class="headerlink" title="9.2.1 平衡二叉树（AVL树）"></a><strong>9.2.1 平衡二叉树（AVL树）</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AVLNode</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, key</span>):</span><br><span class="line">        <span class="variable language_">self</span>.key = key</span><br><span class="line">        <span class="variable language_">self</span>.left = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>.right = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>.height = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AVLTree</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_height</span>(<span class="params">self, node</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> node:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">return</span> node.height</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_balance</span>(<span class="params">self, node</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> node:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.get_height(node.left) - <span class="variable language_">self</span>.get_height(node.right)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">right_rotate</span>(<span class="params">self, y</span>):</span><br><span class="line">        x = y.left</span><br><span class="line">        T2 = x.right</span><br><span class="line">        </span><br><span class="line">        x.right = y</span><br><span class="line">        y.left = T2</span><br><span class="line">        </span><br><span class="line">        y.height = <span class="built_in">max</span>(<span class="variable language_">self</span>.get_height(y.left),</span><br><span class="line">                      <span class="variable language_">self</span>.get_height(y.right)) + <span class="number">1</span></span><br><span class="line">        x.height = <span class="built_in">max</span>(<span class="variable language_">self</span>.get_height(x.left),</span><br><span class="line">                      <span class="variable language_">self</span>.get_height(x.right)) + <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">left_rotate</span>(<span class="params">self, x</span>):</span><br><span class="line">        y = x.right</span><br><span class="line">        T2 = y.left</span><br><span class="line">        </span><br><span class="line">        y.left = x</span><br><span class="line">        x.right = T2</span><br><span class="line">        </span><br><span class="line">        x.height = <span class="built_in">max</span>(<span class="variable language_">self</span>.get_height(x.left),</span><br><span class="line">                      <span class="variable language_">self</span>.get_height(x.right)) + <span class="number">1</span></span><br><span class="line">        y.height = <span class="built_in">max</span>(<span class="variable language_">self</span>.get_height(y.left),</span><br><span class="line">                      <span class="variable language_">self</span>.get_height(y.right)) + <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">insert</span>(<span class="params">self, root, key</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span> AVLNode(key)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> key &lt; root.key:</span><br><span class="line">            root.left = <span class="variable language_">self</span>.insert(root.left, key)</span><br><span class="line">        <span class="keyword">elif</span> key &gt; root.key:</span><br><span class="line">            root.right = <span class="variable language_">self</span>.insert(root.right, key)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> root</span><br><span class="line">        </span><br><span class="line">        root.height = <span class="built_in">max</span>(<span class="variable language_">self</span>.get_height(root.left),</span><br><span class="line">                         <span class="variable language_">self</span>.get_height(root.right)) + <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        balance = <span class="variable language_">self</span>.get_balance(root)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 左左情况</span></span><br><span class="line">        <span class="keyword">if</span> balance &gt; <span class="number">1</span> <span class="keyword">and</span> key &lt; root.left.key:</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.right_rotate(root)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 右右情况</span></span><br><span class="line">        <span class="keyword">if</span> balance &lt; -<span class="number">1</span> <span class="keyword">and</span> key &gt; root.right.key:</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.left_rotate(root)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 左右情况</span></span><br><span class="line">        <span class="keyword">if</span> balance &gt; <span class="number">1</span> <span class="keyword">and</span> key &gt; root.left.key:</span><br><span class="line">            root.left = <span class="variable language_">self</span>.left_rotate(root.left)</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.right_rotate(root)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 右左情况</span></span><br><span class="line">        <span class="keyword">if</span> balance &lt; -<span class="number">1</span> <span class="keyword">and</span> key &lt; root.right.key:</span><br><span class="line">            root.right = <span class="variable language_">self</span>.right_rotate(root.right)</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.left_rotate(root)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure>

<h3 id="9-2-2-红黑树"><a href="#9-2-2-红黑树" class="headerlink" title="9.2.2 红黑树"></a><strong>9.2.2 红黑树</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Color</span>:</span><br><span class="line">    RED = <span class="literal">True</span></span><br><span class="line">    BLACK = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RBNode</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, key</span>):</span><br><span class="line">        <span class="variable language_">self</span>.key = key</span><br><span class="line">        <span class="variable language_">self</span>.left = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>.right = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>.parent = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>.color = Color.RED</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RedBlackTree</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.NIL = RBNode(<span class="literal">None</span>)</span><br><span class="line">        <span class="variable language_">self</span>.NIL.color = Color.BLACK</span><br><span class="line">        <span class="variable language_">self</span>.root = <span class="variable language_">self</span>.NIL</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">left_rotate</span>(<span class="params">self, x</span>):</span><br><span class="line">        y = x.right</span><br><span class="line">        x.right = y.left</span><br><span class="line">        <span class="keyword">if</span> y.left != <span class="variable language_">self</span>.NIL:</span><br><span class="line">            y.left.parent = x</span><br><span class="line">        y.parent = x.parent</span><br><span class="line">        <span class="keyword">if</span> x.parent == <span class="literal">None</span>:</span><br><span class="line">            <span class="variable language_">self</span>.root = y</span><br><span class="line">        <span class="keyword">elif</span> x == x.parent.left:</span><br><span class="line">            x.parent.left = y</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            x.parent.right = y</span><br><span class="line">        y.left = x</span><br><span class="line">        x.parent = y</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">right_rotate</span>(<span class="params">self, x</span>):</span><br><span class="line">        y = x.left</span><br><span class="line">        x.left = y.right</span><br><span class="line">        <span class="keyword">if</span> y.right != <span class="variable language_">self</span>.NIL:</span><br><span class="line">            y.right.parent = x</span><br><span class="line">        y.parent = x.parent</span><br><span class="line">        <span class="keyword">if</span> x.parent == <span class="literal">None</span>:</span><br><span class="line">            <span class="variable language_">self</span>.root = y</span><br><span class="line">        <span class="keyword">elif</span> x == x.parent.right:</span><br><span class="line">            x.parent.right = y</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            x.parent.left = y</span><br><span class="line">        y.right = x</span><br><span class="line">        x.parent = y</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">insert</span>(<span class="params">self, key</span>):</span><br><span class="line">        node = RBNode(key)</span><br><span class="line">        node.left = <span class="variable language_">self</span>.NIL</span><br><span class="line">        node.right = <span class="variable language_">self</span>.NIL</span><br><span class="line">        </span><br><span class="line">        y = <span class="literal">None</span></span><br><span class="line">        x = <span class="variable language_">self</span>.root</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> x != <span class="variable language_">self</span>.NIL:</span><br><span class="line">            y = x</span><br><span class="line">            <span class="keyword">if</span> node.key &lt; x.key:</span><br><span class="line">                x = x.left</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                x = x.right</span><br><span class="line">        </span><br><span class="line">        node.parent = y</span><br><span class="line">        <span class="keyword">if</span> y == <span class="literal">None</span>:</span><br><span class="line">            <span class="variable language_">self</span>.root = node</span><br><span class="line">        <span class="keyword">elif</span> node.key &lt; y.key:</span><br><span class="line">            y.left = node</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            y.right = node</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.fix_insert(node)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fix_insert</span>(<span class="params">self, k</span>):</span><br><span class="line">        <span class="keyword">while</span> k.parent <span class="keyword">and</span> k.parent.color == Color.RED:</span><br><span class="line">            <span class="keyword">if</span> k.parent == k.parent.parent.right:</span><br><span class="line">                u = k.parent.parent.left</span><br><span class="line">                <span class="keyword">if</span> u.color == Color.RED:</span><br><span class="line">                    u.color = Color.BLACK</span><br><span class="line">                    k.parent.color = Color.BLACK</span><br><span class="line">                    k.parent.parent.color = Color.RED</span><br><span class="line">                    k = k.parent.parent</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">if</span> k == k.parent.left:</span><br><span class="line">                        k = k.parent</span><br><span class="line">                        <span class="variable language_">self</span>.right_rotate(k)</span><br><span class="line">                    k.parent.color = Color.BLACK</span><br><span class="line">                    k.parent.parent.color = Color.RED</span><br><span class="line">                    <span class="variable language_">self</span>.left_rotate(k.parent.parent)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                u = k.parent.parent.right</span><br><span class="line">                <span class="keyword">if</span> u.color == Color.RED:</span><br><span class="line">                    u.color = Color.BLACK</span><br><span class="line">                    k.parent.color = Color.BLACK</span><br><span class="line">                    k.parent.parent.color = Color.RED</span><br><span class="line">                    k = k.parent.parent</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">if</span> k == k.parent.right:</span><br><span class="line">                        k = k.parent</span><br><span class="line">                        <span class="variable language_">self</span>.left_rotate(k)</span><br><span class="line">                    k.parent.color = Color.BLACK</span><br><span class="line">                    k.parent.parent.color = Color.RED</span><br><span class="line">                    <span class="variable language_">self</span>.right_rotate(k.parent.parent)</span><br><span class="line">            <span class="keyword">if</span> k == <span class="variable language_">self</span>.root:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="variable language_">self</span>.root.color = Color.BLACK</span><br></pre></td></tr></table></figure>

<h1 id="Python全面练习题集"><a href="#Python全面练习题集" class="headerlink" title="Python全面练习题集"></a>Python全面练习题集</h1><h2 id="基础语法练习-Easy"><a href="#基础语法练习-Easy" class="headerlink" title="基础语法练习 (Easy)"></a>基础语法练习 (Easy)</h2><h3 id="1-数据类型与变量"><a href="#1-数据类型与变量" class="headerlink" title="1. 数据类型与变量"></a>1. 数据类型与变量</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习1: 基本数据类型转换</span></span><br><span class="line"><span class="comment"># 要求:</span></span><br><span class="line"><span class="comment"># 1. 将字符串&quot;123.45&quot;分别转换为整数和浮点数</span></span><br><span class="line"><span class="comment"># 2. 将数字转换为字符串</span></span><br><span class="line"><span class="comment"># 3. 演示不同进制数的表示(二进制、八进制、十六进制)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习2: 复数运算</span></span><br><span class="line"><span class="comment"># 要求:创建两个复数并进行加减乘除运算</span></span><br></pre></td></tr></table></figure>

<h3 id="2-字符串操作"><a href="#2-字符串操作" class="headerlink" title="2. 字符串操作"></a>2. 字符串操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习3: 字符串操作</span></span><br><span class="line"><span class="comment"># 要求:</span></span><br><span class="line"><span class="comment"># 1. 使用切片获取字符串的一部分</span></span><br><span class="line"><span class="comment"># 2. 使用字符串方法:upper(), lower(), strip(), split()</span></span><br><span class="line"><span class="comment"># 3. 检查字符串是否以特定字符开始/结束</span></span><br><span class="line"><span class="comment"># 4. 查找子字符串位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习4: 多行字符串处理</span></span><br><span class="line"><span class="comment"># 要求:处理一个包含多行文本的字符串,统计其中的单词数量</span></span><br></pre></td></tr></table></figure>

<h3 id="3-集合与字典"><a href="#3-集合与字典" class="headerlink" title="3. 集合与字典"></a>3. 集合与字典</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习5: 集合操作</span></span><br><span class="line"><span class="comment"># 要求:创建两个集合,演示交集、并集、差集操作</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习6: 字典操作</span></span><br><span class="line"><span class="comment"># 要求:</span></span><br><span class="line"><span class="comment"># 1. 创建一个嵌套字典</span></span><br><span class="line"><span class="comment"># 2. 使用get()方法安全获取值</span></span><br><span class="line"><span class="comment"># 3. 遍历字典的键值对</span></span><br><span class="line"><span class="comment"># 4. 更新字典内容</span></span><br></pre></td></tr></table></figure>

<h2 id="中级练习-Medium"><a href="#中级练习-Medium" class="headerlink" title="中级练习 (Medium)"></a>中级练习 (Medium)</h2><h3 id="4-函数进阶"><a href="#4-函数进阶" class="headerlink" title="4. 函数进阶"></a>4. 函数进阶</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习7: 函数参数</span></span><br><span class="line"><span class="comment"># 要求:创建一个函数,展示以下参数的使用:</span></span><br><span class="line"><span class="comment"># 1. 位置参数</span></span><br><span class="line"><span class="comment"># 2. 默认参数</span></span><br><span class="line"><span class="comment"># 3. 关键字参数</span></span><br><span class="line"><span class="comment"># 4. *args和**kwargs</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习8: 闭包</span></span><br><span class="line"><span class="comment"># 要求:创建一个计数器闭包,每次调用返回递增的数字</span></span><br></pre></td></tr></table></figure>

<h3 id="5-装饰器"><a href="#5-装饰器" class="headerlink" title="5. 装饰器"></a>5. 装饰器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习9: 带参数的装饰器</span></span><br><span class="line"><span class="comment"># 要求:创建一个可以设置重试次数的装饰器,用于函数执行失败时自动重试</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习10: 类装饰器</span></span><br><span class="line"><span class="comment"># 要求:创建一个类装饰器,用于记录被装饰函数的调用历史</span></span><br></pre></td></tr></table></figure>

<h3 id="6-生成器"><a href="#6-生成器" class="headerlink" title="6. 生成器"></a>6. 生成器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习11: 生成器函数</span></span><br><span class="line"><span class="comment"># 要求:实现一个斐波那契数列生成器</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习12: 生成器表达式</span></span><br><span class="line"><span class="comment"># 要求:使用生成器表达式实现一个大文件的逐行读取器</span></span><br></pre></td></tr></table></figure>

<h2 id="高级练习-Hard"><a href="#高级练习-Hard" class="headerlink" title="高级练习 (Hard)"></a>高级练习 (Hard)</h2><h3 id="7-类与对象进阶"><a href="#7-类与对象进阶" class="headerlink" title="7. 类与对象进阶"></a>7. 类与对象进阶</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习13: 魔术方法</span></span><br><span class="line"><span class="comment"># 要求:创建一个分数类,实现以下魔术方法:</span></span><br><span class="line"><span class="comment"># 1. __str__和__repr__</span></span><br><span class="line"><span class="comment"># 2. __add__和__sub__</span></span><br><span class="line"><span class="comment"># 3. __eq__和__lt__</span></span><br><span class="line"><span class="comment"># 4. __len__</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习14: 属性装饰器</span></span><br><span class="line"><span class="comment"># 要求:创建一个温度类,使用@property实现摄氏度和华氏度的转换</span></span><br></pre></td></tr></table></figure>

<h3 id="8-元类"><a href="#8-元类" class="headerlink" title="8. 元类"></a>8. 元类</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习15: 自定义元类</span></span><br><span class="line"><span class="comment"># 要求:创建一个元类,为所有使用该元类的类自动添加日志功能</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习16: 单例模式</span></span><br><span class="line"><span class="comment"># 要求:使用元类实现单例模式</span></span><br></pre></td></tr></table></figure>

<h3 id="9-并发编程"><a href="#9-并发编程" class="headerlink" title="9. 并发编程"></a>9. 并发编程</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习17: 多线程</span></span><br><span class="line"><span class="comment"># 要求:创建一个线程池,并发下载多个URL的内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习18: 多进程</span></span><br><span class="line"><span class="comment"># 要求:使用多进程实现一个简单的并行计算任务</span></span><br></pre></td></tr></table></figure>

<h2 id="专家级练习-Expert"><a href="#专家级练习-Expert" class="headerlink" title="专家级练习 (Expert)"></a>专家级练习 (Expert)</h2><h3 id="10-设计模式"><a href="#10-设计模式" class="headerlink" title="10. 设计模式"></a>10. 设计模式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习19: 观察者模式</span></span><br><span class="line"><span class="comment"># 要求:实现一个简单的事件系统,包含发布者和订阅者</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习20: 工厂模式</span></span><br><span class="line"><span class="comment"># 要求:实现一个形状工厂,可以创建不同的图形对象</span></span><br></pre></td></tr></table></figure>

<h3 id="11-异步编程"><a href="#11-异步编程" class="headerlink" title="11. 异步编程"></a>11. 异步编程</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习21: 异步函数</span></span><br><span class="line"><span class="comment"># 要求:使用async/await实现一个异步网络请求客户端</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习22: 异步上下文管理器</span></span><br><span class="line"><span class="comment"># 要求:实现一个异步数据库连接管理器</span></span><br></pre></td></tr></table></figure>

<h3 id="12-项目实践"><a href="#12-项目实践" class="headerlink" title="12. 项目实践"></a>12. 项目实践</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习23: 命令行工具</span></span><br><span class="line"><span class="comment"># 要求:创建一个命令行工具,实现以下功能:</span></span><br><span class="line"><span class="comment"># 1. 文件批量重命名</span></span><br><span class="line"><span class="comment"># 2. 支持正则表达式匹配</span></span><br><span class="line"><span class="comment"># 3. 命令行参数解析</span></span><br><span class="line"><span class="comment"># 4. 进度条显示</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习24: 简单Web服务器</span></span><br><span class="line"><span class="comment"># 要求:实现一个基本的HTTP服务器:</span></span><br><span class="line"><span class="comment"># 1. 支持GET/POST请求</span></span><br><span class="line"><span class="comment"># 2. 支持静态文件服务</span></span><br><span class="line"><span class="comment"># 3. 简单的路由系统</span></span><br><span class="line"><span class="comment"># 4. 请求日志记录</span></span><br></pre></td></tr></table></figure>

<h1 id="Python练习题答案集"><a href="#Python练习题答案集" class="headerlink" title="Python练习题答案集"></a>Python练习题答案集</h1><h2 id="基础语法练习-Easy-1"><a href="#基础语法练习-Easy-1" class="headerlink" title="基础语法练习 (Easy)"></a>基础语法练习 (Easy)</h2><h3 id="1-数据类型与变量-1"><a href="#1-数据类型与变量-1" class="headerlink" title="1. 数据类型与变量"></a>1. 数据类型与变量</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习1答案: 基本数据类型转换</span></span><br><span class="line">str_num = <span class="string">&quot;123.45&quot;</span></span><br><span class="line">int_num = <span class="built_in">int</span>(<span class="built_in">float</span>(str_num))  <span class="comment"># 先转换为float再转换为int</span></span><br><span class="line">float_num = <span class="built_in">float</span>(str_num)</span><br><span class="line">str_back = <span class="built_in">str</span>(int_num)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进制表示</span></span><br><span class="line">binary = <span class="number">0b1010</span>  <span class="comment"># 二进制</span></span><br><span class="line">octal = <span class="number">0o12</span>    <span class="comment"># 八进制</span></span><br><span class="line">hexa = <span class="number">0xA</span>      <span class="comment"># 十六进制</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;整数: <span class="subst">&#123;int_num&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;浮点数: <span class="subst">&#123;float_num&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;字符串: <span class="subst">&#123;str_back&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;二进制: <span class="subst">&#123;binary&#125;</span>, 八进制: <span class="subst">&#123;octal&#125;</span>, 十六进制: <span class="subst">&#123;hexa&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习2答案: 复数运算</span></span><br><span class="line">c1 = <span class="number">3</span> + <span class="number">4j</span></span><br><span class="line">c2 = <span class="number">1</span> - <span class="number">2j</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;加法: <span class="subst">&#123;c1 + c2&#125;</span>&quot;</span>)  <span class="comment"># (4+2j)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;减法: <span class="subst">&#123;c1 - c2&#125;</span>&quot;</span>)  <span class="comment"># (2+6j)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;乘法: <span class="subst">&#123;c1 * c2&#125;</span>&quot;</span>)  <span class="comment"># (11+2j)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;除法: <span class="subst">&#123;c1 / c2&#125;</span>&quot;</span>)  <span class="comment"># (-0.2+2.4j)</span></span><br></pre></td></tr></table></figure>

<h3 id="2-字符串操作-1"><a href="#2-字符串操作-1" class="headerlink" title="2. 字符串操作"></a>2. 字符串操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习3答案: 字符串操作</span></span><br><span class="line">text = <span class="string">&quot;Hello, Python World!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 切片</span></span><br><span class="line"><span class="built_in">print</span>(text[<span class="number">0</span>:<span class="number">5</span>])      <span class="comment"># Hello</span></span><br><span class="line"><span class="built_in">print</span>(text[-<span class="number">6</span>:-<span class="number">1</span>])    <span class="comment"># World</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串方法</span></span><br><span class="line"><span class="built_in">print</span>(text.upper())   <span class="comment"># HELLO, PYTHON WORLD!</span></span><br><span class="line"><span class="built_in">print</span>(text.lower())   <span class="comment"># hello, python world!</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;  space  &quot;</span>.strip())  <span class="comment"># &quot;space&quot;</span></span><br><span class="line">words = text.split()  <span class="comment"># [&#x27;Hello,&#x27;, &#x27;Python&#x27;, &#x27;World!&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查开始/结束</span></span><br><span class="line"><span class="built_in">print</span>(text.startswith(<span class="string">&quot;Hello&quot;</span>))  <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(text.endswith(<span class="string">&quot;World!&quot;</span>))   <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找子字符串</span></span><br><span class="line"><span class="built_in">print</span>(text.find(<span class="string">&quot;Python&quot;</span>))  <span class="comment"># 7</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习4答案: 多行字符串处理</span></span><br><span class="line">text = <span class="string">&quot;&quot;&quot;First line</span></span><br><span class="line"><span class="string">Second line</span></span><br><span class="line"><span class="string">Third line with more words</span></span><br><span class="line"><span class="string">Last line&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计单词数量</span></span><br><span class="line">word_count = <span class="built_in">sum</span>(<span class="built_in">len</span>(line.split()) <span class="keyword">for</span> line <span class="keyword">in</span> text.splitlines())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;总单词数: <span class="subst">&#123;word_count&#125;</span>&quot;</span>)  <span class="comment"># 11</span></span><br></pre></td></tr></table></figure>

<h3 id="3-集合与字典-1"><a href="#3-集合与字典-1" class="headerlink" title="3. 集合与字典"></a>3. 集合与字典</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习5答案: 集合操作</span></span><br><span class="line">set1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">set2 = &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 集合运算</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;交集: <span class="subst">&#123;set1 &amp; set2&#125;</span>&quot;</span>)     <span class="comment"># &#123;4, 5&#125;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;并集: <span class="subst">&#123;set1 | set2&#125;</span>&quot;</span>)     <span class="comment"># &#123;1, 2, 3, 4, 5, 6, 7, 8&#125;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;差集: <span class="subst">&#123;set1 - set2&#125;</span>&quot;</span>)     <span class="comment"># &#123;1, 2, 3&#125;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;对称差集: <span class="subst">&#123;set1 ^ set2&#125;</span>&quot;</span>) <span class="comment"># &#123;1, 2, 3, 6, 7, 8&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习6答案: 字典操作</span></span><br><span class="line"><span class="comment"># 创建嵌套字典</span></span><br><span class="line">student = &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Alice&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="string">&quot;scores&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;math&quot;</span>: <span class="number">90</span>,</span><br><span class="line">        <span class="string">&quot;english&quot;</span>: <span class="number">85</span>,</span><br><span class="line">        <span class="string">&quot;history&quot;</span>: <span class="number">88</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安全获取值</span></span><br><span class="line"><span class="built_in">print</span>(student.get(<span class="string">&quot;phone&quot;</span>, <span class="string">&quot;未设置&quot;</span>))  <span class="comment"># 未设置</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历字典</span></span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> student.items():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;key&#125;</span>: <span class="subst">&#123;value&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新字典</span></span><br><span class="line">student.update(&#123;<span class="string">&quot;phone&quot;</span>: <span class="string">&quot;123-456-789&quot;</span>, <span class="string">&quot;email&quot;</span>: <span class="string">&quot;alice@example.com&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="中级练习-Medium-1"><a href="#中级练习-Medium-1" class="headerlink" title="中级练习 (Medium)"></a>中级练习 (Medium)</h2><h3 id="4-函数进阶-1"><a href="#4-函数进阶-1" class="headerlink" title="4. 函数进阶"></a>4. 函数进阶</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习7答案: 函数参数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">demo_function</span>(<span class="params">pos1, pos2, default_arg=<span class="string">&quot;default&quot;</span>, *args, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;位置参数: <span class="subst">&#123;pos1&#125;</span>, <span class="subst">&#123;pos2&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;默认参数: <span class="subst">&#123;default_arg&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;可变位置参数: <span class="subst">&#123;args&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;关键字参数: <span class="subst">&#123;kwargs&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试函数</span></span><br><span class="line">demo_function(<span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;custom&quot;</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, x=<span class="number">10</span>, y=<span class="number">20</span>)</span><br><span class="line"><span class="comment"># 输出:</span></span><br><span class="line"><span class="comment"># 位置参数: 1, 2</span></span><br><span class="line"><span class="comment"># 默认参数: custom</span></span><br><span class="line"><span class="comment"># 可变位置参数: (3, 4, 5)</span></span><br><span class="line"><span class="comment"># 关键字参数: &#123;&#x27;x&#x27;: 10, &#x27;y&#x27;: 20&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习8答案: 闭包</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_counter</span>():</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">counter</span>():</span><br><span class="line">        <span class="keyword">nonlocal</span> count</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> count</span><br><span class="line">    <span class="keyword">return</span> counter</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试闭包</span></span><br><span class="line">counter = create_counter()</span><br><span class="line"><span class="built_in">print</span>(counter())  <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">print</span>(counter())  <span class="comment"># 2</span></span><br><span class="line"><span class="built_in">print</span>(counter())  <span class="comment"># 3</span></span><br></pre></td></tr></table></figure>

<h3 id="5-装饰器-1"><a href="#5-装饰器-1" class="headerlink" title="5. 装饰器"></a>5. 装饰器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习9答案: 带参数的装饰器</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">retry</span>(<span class="params">max_attempts=<span class="number">3</span>, delay=<span class="number">1</span></span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decorator</span>(<span class="params">func</span>):</span><br><span class="line"><span class="meta">        @wraps(<span class="params">func</span>)</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">            attempts = <span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> attempts &lt; max_attempts:</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">                <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                    attempts += <span class="number">1</span></span><br><span class="line">                    <span class="keyword">if</span> attempts == max_attempts:</span><br><span class="line">                        <span class="keyword">raise</span> e</span><br><span class="line">                    time.sleep(delay)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试装饰器</span></span><br><span class="line"><span class="meta">@retry(<span class="params">max_attempts=<span class="number">3</span>, delay=<span class="number">1</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">unstable_function</span>():</span><br><span class="line">    <span class="keyword">import</span> random</span><br><span class="line">    <span class="keyword">if</span> random.random() &lt; <span class="number">0.7</span>:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&quot;Random error&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Success!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 练习10答案: 类装饰器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FunctionTracker</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, func</span>):</span><br><span class="line">        <span class="variable language_">self</span>.func = func</span><br><span class="line">        <span class="variable language_">self</span>.history = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        result = <span class="variable language_">self</span>.func(*args, **kwargs)</span><br><span class="line">        <span class="variable language_">self</span>.history.append(&#123;</span><br><span class="line">            <span class="string">&#x27;args&#x27;</span>: args,</span><br><span class="line">            <span class="string">&#x27;kwargs&#x27;</span>: kwargs,</span><br><span class="line">            <span class="string">&#x27;result&#x27;</span>: result,</span><br><span class="line">            <span class="string">&#x27;time&#x27;</span>: time.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_history</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.history</span><br><span class="line"></span><br><span class="line"><span class="meta">@FunctionTracker</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试类装饰器</span></span><br><span class="line"><span class="built_in">print</span>(add(<span class="number">2</span>, <span class="number">3</span>))  <span class="comment"># 5</span></span><br><span class="line"><span class="built_in">print</span>(add(<span class="number">4</span>, <span class="number">5</span>))  <span class="comment"># 9</span></span><br><span class="line"><span class="built_in">print</span>(add.get_history())</span><br></pre></td></tr></table></figure>

<p>[继续下一部分…]</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://lave.fun/">Lave</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://lave.fun/cn/22493/">http://lave.fun/cn/22493/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://lave.fun" target="_blank">Lave's Cabin</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a><a class="post-meta__tags" href="/tags/%E5%AD%A6%E4%B9%A0/">学习</a></div><div class="post-share"><div class="social-share" data-image="https://www.python.org/static/img/python-logo.png" data-sites="twitter,facebook,qq,wechat,weibo"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>Sponser/打赏！点这里！如果你觉得这对你有帮助或想要施舍下这个小可怜的话 （〃｀ 3′〃）</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/rewardQRcode/wechat.jpg" target="_blank"><img class="post-qr-code-img" src= "/img/Loading.png" data-lazy-src="/img/rewardQRcode/wechat.jpg" alt="微信赞赏码"/></a><div class="post-qr-code-desc">微信赞赏码</div></li><li class="reward-item"><a href="/img/rewardQRcode/TRON.jpg" target="_blank"><img class="post-qr-code-img" src= "/img/Loading.png" data-lazy-src="/img/rewardQRcode/TRON.jpg" alt="Only Accept USDT-TRON(TRC20) !!"/></a><div class="post-qr-code-desc">Only Accept USDT-TRON(TRC20) !!</div></li><li class="reward-item"><a href="/img/rewardQRcode/Optimism.jpg" target="_blank"><img class="post-qr-code-img" src= "/img/Loading.png" data-lazy-src="/img/rewardQRcode/Optimism.jpg" alt="Only Accept USDT-Optimism !!"/></a><div class="post-qr-code-desc">Only Accept USDT-Optimism !!</div></li><li class="reward-item"><a href="/img/rewardQRcode/Polygon.jpg" target="_blank"><img class="post-qr-code-img" src= "/img/Loading.png" data-lazy-src="/img/rewardQRcode/Polygon.jpg" alt="Only Accept USDT-Polygon !!"/></a><div class="post-qr-code-desc">Only Accept USDT-Polygon !!</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="prev-post pull-left" href="/cn/5613/" title="pythonRevive"><img class="cover" src= "/img/Loading.png" data-lazy-src="/gallery/tomosaki_TimeTravel.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">pythonRevive</div></div></a><a class="next-post pull-right" href="/cn/46722/" title="五人定律的闲谈 - 更新中"><img class="cover" src= "/img/Loading.png" data-lazy-src="/gallery/tomosaki_AfterClass.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">五人定律的闲谈 - 更新中</div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a href="/cn/33368/" title="C# 中传参关键字 ref 和 out 笔记"><img class="cover" src= "/img/Loading.png" data-lazy-src="https://www.jetbrains.com/guide/assets/csharp-logo-265a149e.svg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-15</div><div class="title">C# 中传参关键字 ref 和 out 笔记</div></div></a><a href="/cn/28339/" title="我在看的技术指标"><img class="cover" src= "/img/Loading.png" data-lazy-src="https://www.dbs.com.cn/iwov-resources/media/images/investments/unit-trust/unit-trust-service-684x630.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-04</div><div class="title">我在看的技术指标</div></div></a><a href="/cn/30766/" title="我在看的消息面 - 待更新"><img class="cover" src= "/img/Loading.png" data-lazy-src="https://www.dbs.com.cn/iwov-resources/media/images/investments/unit-trust/unit-trust-service-684x630.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-08</div><div class="title">我在看的消息面 - 待更新</div></div></a><a href="/cn/60988/" title="数据结构与算法知识点"><img class="cover" src= "/img/Loading.png" data-lazy-src="/gallery/tomosaki_AfterClass.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-07</div><div class="title">数据结构与算法知识点</div></div></a><a href="/cn/29486/" title="代币经济学笔记"><img class="cover" src= "/img/Loading.png" data-lazy-src="https://www.skrill.com/fileadmin/Personal/Skrill_Crypto_Academy/Beginner/CA_hero_4_beginner.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-13</div><div class="title">代币经济学笔记</div></div></a><a href="/cn/60247/" title="个人投资经验记录 - 更新中"><img class="cover" src= "/img/Loading.png" data-lazy-src="https://www.dbs.com.cn/iwov-resources/media/images/investments/unit-trust/unit-trust-service-684x630.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-13</div><div class="title">个人投资经验记录 - 更新中</div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comments</span></div><div class="comment-switch"><span class="first-comment">Disqus</span><span id="switch-btn"></span><span class="second-comment">Valine</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info is-center"><div class="avatar-img"><img src= "/img/Loading.png" data-lazy-src="/img/LavesCabin.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Lave</div><div class="author-info-description">Tech, Web3, Photography, Literature, ACG, IndieDev, GameDev..<br>EN(6/10), CN(10/10), JP(1/50)</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">43</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">30</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">10</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://x.com/Sacilave2"><i class="fa-brands fa-twitter"></i><span>Follow Me!</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/sacilave" target="_blank" title="Github"><i class="fab fa-github" style="color: #hdhfbb;"></i></a><a class="social-icon" href="mailto:work@lave.fun" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #hdhfbb;"></i></a><a class="social-icon" href="https://t.me/sacilave" target="_blank" title="Telegram"><i class="fa-brands fa-telegram" style="color: #hdhfbb;"></i></a><a class="social-icon" href="https://steamcommunity.com/id/sacilave" target="_blank" title="Steam"><i class="fa-brands fa-steam" style="color: #hdhfbb;"></i></a><a class="social-icon" href="https://x.com/Sacilave2" target="_blank" title="Twitter/X"><i class="fa-brands fa-twitter" style="color: #hdhfbb;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Thanks for the visit o(*°▽°*)o<br>Lave probably will post some blogs in the future.<br>可以在 右上角的Gallery 中找到我的摄影集~<br>还可以使用右上角语言切换来看特定语言的帖子，然后...有些帖子可能只是开坑了还没写或没写完哦~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Python%E7%9A%84%E5%BA%B7%E5%A4%8D%E8%AE%AD%E7%BB%83"><span class="toc-number">1.</span> <span class="toc-text">Python的康复训练</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9APython%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="toc-number">2.</span> <span class="toc-text">第一章：Python基础语法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E5%8F%98%E9%87%8F%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 变量与数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%AF%B9%E6%AF%94"><span class="toc-number">2.1.1.</span> <span class="toc-text">各数据类型对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E9%80%89%E6%8B%A9%E6%8C%87%E5%8D%97"><span class="toc-number">2.1.2.</span> <span class="toc-text">数据类型选择指南</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.1.3.</span> <span class="toc-text">1.1.1 基本数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">2.1.4.</span> <span class="toc-text">1.1.2 类型转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-3-%E5%8F%98%E9%87%8F%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99"><span class="toc-number">2.1.5.</span> <span class="toc-text">1.1.3 变量命名规则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">2.2.</span> <span class="toc-text">1.2 数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-%E5%88%97%E8%A1%A8-List"><span class="toc-number">2.2.1.</span> <span class="toc-text">1.2.1 列表(List)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-%E5%85%83%E7%BB%84-Tuple"><span class="toc-number">2.2.2.</span> <span class="toc-text">1.2.2 元组(Tuple)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-3-%E9%9B%86%E5%90%88-Set"><span class="toc-number">2.2.3.</span> <span class="toc-text">1.2.3 集合(Set)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-4-%E5%AD%97%E5%85%B8-Dictionary"><span class="toc-number">2.2.4.</span> <span class="toc-text">1.2.4 字典(Dictionary)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84"><span class="toc-number">2.3.</span> <span class="toc-text">1.3 控制结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5-if"><span class="toc-number">2.3.1.</span> <span class="toc-text">1.3.1 条件语句(if)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-for%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.3.2.</span> <span class="toc-text">1.3.2 for循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-3-while%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.3.3.</span> <span class="toc-text">1.3.3 while循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-4-%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.3.4.</span> <span class="toc-text">1.3.4 循环控制语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-5-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">2.3.5.</span> <span class="toc-text">1.3.5 异常处理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E5%87%BD%E6%95%B0%E4%B8%8E%E6%A8%A1%E5%9D%97"><span class="toc-number">3.</span> <span class="toc-text">第二章：函数与模块</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89%E4%B8%8E%E8%B0%83%E7%94%A8"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 函数的定义与调用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-%E5%9F%BA%E6%9C%AC%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89"><span class="toc-number">3.1.1.</span> <span class="toc-text">2.1.1 基本函数定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">3.1.2.</span> <span class="toc-text">2.1.2 函数参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3-%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="toc-number">3.1.3.</span> <span class="toc-text">2.1.3 作用域和命名空间</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E9%AB%98%E7%BA%A7%E5%87%BD%E6%95%B0%E7%89%B9%E6%80%A7"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 高级函数特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-number">3.2.1.</span> <span class="toc-text">2.2.1 装饰器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">3.2.2.</span> <span class="toc-text">2.2.2 生成器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E6%A8%A1%E5%9D%97%E5%92%8C%E5%8C%85"><span class="toc-number">3.3.</span> <span class="toc-text">2.3 模块和包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-%E6%A8%A1%E5%9D%97%E5%AF%BC%E5%85%A5"><span class="toc-number">3.3.1.</span> <span class="toc-text">2.3.1 模块导入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%A8%A1%E5%9D%97"><span class="toc-number">3.3.2.</span> <span class="toc-text">2.3.2 创建自己的模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-3-%E5%8C%85%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">3.3.3.</span> <span class="toc-text">2.3.3 包的结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-4-%E5%B8%B8%E7%94%A8%E6%A0%87%E5%87%86%E5%BA%93"><span class="toc-number">3.3.4.</span> <span class="toc-text">2.3.4 常用标准库</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%EF%BC%88OOP%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">第三章：面向对象编程（OOP）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80"><span class="toc-number">4.1.</span> <span class="toc-text">3.1 类与对象基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-%E7%B1%BB%E7%9A%84%E5%AE%9A%E4%B9%89%E4%B8%8E%E5%AE%9E%E4%BE%8B%E5%8C%96"><span class="toc-number">4.1.1.</span> <span class="toc-text">3.1.1 类的定义与实例化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-%E5%B1%9E%E6%80%A7%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-number">4.1.2.</span> <span class="toc-text">3.1.2 属性装饰器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-3-%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95%E5%92%8C%E7%B1%BB%E6%96%B9%E6%B3%95"><span class="toc-number">4.1.3.</span> <span class="toc-text">3.1.3 静态方法和类方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E7%BB%A7%E6%89%BF%E4%B8%8E%E5%A4%9A%E6%80%81"><span class="toc-number">4.2.</span> <span class="toc-text">3.2 继承与多态</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-%E5%9F%BA%E6%9C%AC%E7%BB%A7%E6%89%BF"><span class="toc-number">4.2.1.</span> <span class="toc-text">3.2.1 基本继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF"><span class="toc-number">4.2.2.</span> <span class="toc-text">3.2.2 多重继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3-%E6%8A%BD%E8%B1%A1%E5%9F%BA%E7%B1%BB"><span class="toc-number">4.2.3.</span> <span class="toc-text">3.2.3 抽象基类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E9%AD%94%E6%9C%AF%E6%96%B9%E6%B3%95"><span class="toc-number">4.3.</span> <span class="toc-text">3.3 魔术方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%A4%BA%E4%BE%8B"><span class="toc-number">4.4.</span> <span class="toc-text">3.4 设计模式示例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-1-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.4.1.</span> <span class="toc-text">3.4.1 单例模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-2-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.4.2.</span> <span class="toc-text">3.4.2 工厂模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E4%B8%8E%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">5.</span> <span class="toc-text">第四章：文件操作与异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">5.1.</span> <span class="toc-text">4.1 文件操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-%E5%9F%BA%E6%9C%AC%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">5.1.1.</span> <span class="toc-text">4.1.1 基本文件操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2-%E9%AB%98%E7%BA%A7%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">5.1.2.</span> <span class="toc-text">4.1.2 高级文件操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-3-%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">5.1.3.</span> <span class="toc-text">4.1.3 二进制文件操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">5.2.</span> <span class="toc-text">4.2 异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-%E5%9F%BA%E6%9C%AC%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">5.2.1.</span> <span class="toc-text">4.2.1 基本异常处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8"><span class="toc-number">5.2.2.</span> <span class="toc-text">4.2.2 自定义异常</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3-%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8"><span class="toc-number">5.2.3.</span> <span class="toc-text">4.2.3 上下文管理器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-4-%E8%B0%83%E8%AF%95%E5%92%8C%E6%97%A5%E5%BF%97"><span class="toc-number">5.2.4.</span> <span class="toc-text">4.2.4 调试和日志</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E9%AB%98%E7%BA%A7Python%E7%89%B9%E6%80%A7"><span class="toc-number">6.</span> <span class="toc-text">第五章：高级Python特性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">6.1.</span> <span class="toc-text">5.1 迭代器和生成器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-1-%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="toc-number">6.1.1.</span> <span class="toc-text">5.1.1 迭代器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-2-%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">6.1.2.</span> <span class="toc-text">5.1.2 生成器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E8%A3%85%E9%A5%B0%E5%99%A8%E8%BF%9B%E9%98%B6"><span class="toc-number">6.2.</span> <span class="toc-text">5.2 装饰器进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-1-%E5%B8%A6%E5%8F%82%E6%95%B0%E7%9A%84%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-number">6.2.1.</span> <span class="toc-text">5.2.1 带参数的装饰器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-2-%E5%A4%9A%E9%87%8D%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-number">6.2.2.</span> <span class="toc-text">5.2.2 多重装饰器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E5%85%83%E7%B1%BB%E5%92%8C%E7%B1%BB%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-number">6.3.</span> <span class="toc-text">5.3 元类和类装饰器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-1-%E5%85%83%E7%B1%BB"><span class="toc-number">6.3.1.</span> <span class="toc-text">5.3.1 元类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-2-%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-number">6.3.2.</span> <span class="toc-text">5.3.2 描述符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B"><span class="toc-number">6.4.</span> <span class="toc-text">5.4 并发编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-1-%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="toc-number">6.4.1.</span> <span class="toc-text">5.4.1 多线程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-2-%E5%A4%9A%E8%BF%9B%E7%A8%8B"><span class="toc-number">6.4.2.</span> <span class="toc-text">5.4.2 多进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-3-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B"><span class="toc-number">6.4.3.</span> <span class="toc-text">5.4.3 异步编程</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%B8%B8%E7%94%A8%E6%A0%87%E5%87%86%E5%BA%93"><span class="toc-number">7.</span> <span class="toc-text">第六章：常用标准库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86"><span class="toc-number">7.1.</span> <span class="toc-text">6.1 文本处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1-string-%E6%A8%A1%E5%9D%97"><span class="toc-number">7.1.1.</span> <span class="toc-text">6.1.1 string 模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-2-re-%E6%A8%A1%E5%9D%97%EF%BC%88%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%89"><span class="toc-number">7.1.2.</span> <span class="toc-text">6.1.2 re 模块（正则表达式）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4"><span class="toc-number">7.2.</span> <span class="toc-text">6.2 日期和时间</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-1-datetime-%E6%A8%A1%E5%9D%97"><span class="toc-number">7.2.1.</span> <span class="toc-text">6.2.1 datetime 模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86"><span class="toc-number">7.3.</span> <span class="toc-text">6.3 数据处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-1-json-%E6%A8%A1%E5%9D%97"><span class="toc-number">7.3.1.</span> <span class="toc-text">6.3.1 json 模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-2-csv-%E6%A8%A1%E5%9D%97"><span class="toc-number">7.3.2.</span> <span class="toc-text">6.3.2 csv 模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E7%B3%BB%E7%BB%9F%E5%92%8COS%E6%93%8D%E4%BD%9C"><span class="toc-number">7.4.</span> <span class="toc-text">6.4 系统和OS操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-1-os-%E5%92%8C-sys-%E6%A8%A1%E5%9D%97"><span class="toc-number">7.4.1.</span> <span class="toc-text">6.4.1 os 和 sys 模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-2-argparse-%E6%A8%A1%E5%9D%97"><span class="toc-number">7.4.2.</span> <span class="toc-text">6.4.2 argparse 模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-3-logging-%E6%A8%A1%E5%9D%97"><span class="toc-number">7.4.3.</span> <span class="toc-text">6.4.3 logging 模块</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">8.</span> <span class="toc-text">第七章：算法与数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">8.1.</span> <span class="toc-text">7.1 基本数据结构实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-1-%E9%93%BE%E8%A1%A8"><span class="toc-number">8.1.1.</span> <span class="toc-text">7.1.1 链表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-2-%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97"><span class="toc-number">8.1.2.</span> <span class="toc-text">7.1.2 栈和队列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-3-%E4%BA%8C%E5%8F%89%E6%A0%91"><span class="toc-number">8.1.3.</span> <span class="toc-text">7.1.3 二叉树</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95"><span class="toc-number">8.2.</span> <span class="toc-text">7.2 排序算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-1-%E5%9F%BA%E6%9C%AC%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95"><span class="toc-number">8.2.1.</span> <span class="toc-text">7.2.1 基本排序算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-2-%E9%AB%98%E7%BA%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95"><span class="toc-number">8.2.2.</span> <span class="toc-text">7.2.2 高级排序算法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95"><span class="toc-number">8.3.</span> <span class="toc-text">7.3 搜索算法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E7%AB%A0%EF%BC%9A%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E4%B8%8E%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95"><span class="toc-number">9.</span> <span class="toc-text">第八章：动态规划与贪心算法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E5%9F%BA%E7%A1%80"><span class="toc-number">9.1.</span> <span class="toc-text">8.1 动态规划基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="toc-number">9.1.1.</span> <span class="toc-text">8.1.1 基本概念与实现方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-2-%E7%BB%8F%E5%85%B8%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98"><span class="toc-number">9.1.2.</span> <span class="toc-text">8.1.2 经典动态规划问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95"><span class="toc-number">9.2.</span> <span class="toc-text">8.2 贪心算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-1-%E5%9F%BA%E6%9C%AC%E8%B4%AA%E5%BF%83%E9%97%AE%E9%A2%98"><span class="toc-number">9.2.1.</span> <span class="toc-text">8.2.1 基本贪心问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-2-%E9%AB%98%E7%BA%A7%E8%B4%AA%E5%BF%83%E9%97%AE%E9%A2%98"><span class="toc-number">9.2.2.</span> <span class="toc-text">8.2.2 高级贪心问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0%EF%BC%9A%E9%AB%98%E7%BA%A7%E7%AE%97%E6%B3%95%E4%B8%8E%E6%8A%80%E5%B7%A7"><span class="toc-number">10.</span> <span class="toc-text">第九章：高级算法与技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-%E5%9B%BE%E8%AE%BA%E7%AE%97%E6%B3%95"><span class="toc-number">10.1.</span> <span class="toc-text">9.1 图论算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-1-%E5%9B%BE%E7%9A%84%E8%A1%A8%E7%A4%BA%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">10.1.1.</span> <span class="toc-text">9.1.1 图的表示与基本操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-2-%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E7%AE%97%E6%B3%95"><span class="toc-number">10.1.2.</span> <span class="toc-text">9.1.2 最短路径算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-3-%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91%E7%AE%97%E6%B3%95"><span class="toc-number">10.1.3.</span> <span class="toc-text">9.1.3 最小生成树算法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-%E9%AB%98%E7%BA%A7%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">10.2.</span> <span class="toc-text">9.2 高级数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-1-%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%88AVL%E6%A0%91%EF%BC%89"><span class="toc-number">10.2.1.</span> <span class="toc-text">9.2.1 平衡二叉树（AVL树）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-2-%E7%BA%A2%E9%BB%91%E6%A0%91"><span class="toc-number">10.2.2.</span> <span class="toc-text">9.2.2 红黑树</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Python%E5%85%A8%E9%9D%A2%E7%BB%83%E4%B9%A0%E9%A2%98%E9%9B%86"><span class="toc-number">11.</span> <span class="toc-text">Python全面练习题集</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E7%BB%83%E4%B9%A0-Easy"><span class="toc-number">11.1.</span> <span class="toc-text">基础语法练习 (Easy)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8F%98%E9%87%8F"><span class="toc-number">11.1.1.</span> <span class="toc-text">1. 数据类型与变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C"><span class="toc-number">11.1.2.</span> <span class="toc-text">2. 字符串操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%9B%86%E5%90%88%E4%B8%8E%E5%AD%97%E5%85%B8"><span class="toc-number">11.1.3.</span> <span class="toc-text">3. 集合与字典</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E7%BA%A7%E7%BB%83%E4%B9%A0-Medium"><span class="toc-number">11.2.</span> <span class="toc-text">中级练习 (Medium)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6"><span class="toc-number">11.2.1.</span> <span class="toc-text">4. 函数进阶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-number">11.2.2.</span> <span class="toc-text">5. 装饰器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">11.2.3.</span> <span class="toc-text">6. 生成器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7%E7%BB%83%E4%B9%A0-Hard"><span class="toc-number">11.3.</span> <span class="toc-text">高级练习 (Hard)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1%E8%BF%9B%E9%98%B6"><span class="toc-number">11.3.1.</span> <span class="toc-text">7. 类与对象进阶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%85%83%E7%B1%BB"><span class="toc-number">11.3.2.</span> <span class="toc-text">8. 元类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B"><span class="toc-number">11.3.3.</span> <span class="toc-text">9. 并发编程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%93%E5%AE%B6%E7%BA%A7%E7%BB%83%E4%B9%A0-Expert"><span class="toc-number">11.4.</span> <span class="toc-text">专家级练习 (Expert)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">11.4.1.</span> <span class="toc-text">10. 设计模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B"><span class="toc-number">11.4.2.</span> <span class="toc-text">11. 异步编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5"><span class="toc-number">11.4.3.</span> <span class="toc-text">12. 项目实践</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Python%E7%BB%83%E4%B9%A0%E9%A2%98%E7%AD%94%E6%A1%88%E9%9B%86"><span class="toc-number">12.</span> <span class="toc-text">Python练习题答案集</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E7%BB%83%E4%B9%A0-Easy-1"><span class="toc-number">12.1.</span> <span class="toc-text">基础语法练习 (Easy)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8F%98%E9%87%8F-1"><span class="toc-number">12.1.1.</span> <span class="toc-text">1. 数据类型与变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C-1"><span class="toc-number">12.1.2.</span> <span class="toc-text">2. 字符串操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%9B%86%E5%90%88%E4%B8%8E%E5%AD%97%E5%85%B8-1"><span class="toc-number">12.1.3.</span> <span class="toc-text">3. 集合与字典</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E7%BA%A7%E7%BB%83%E4%B9%A0-Medium-1"><span class="toc-number">12.2.</span> <span class="toc-text">中级练习 (Medium)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6-1"><span class="toc-number">12.2.1.</span> <span class="toc-text">4. 函数进阶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%A3%85%E9%A5%B0%E5%99%A8-1"><span class="toc-number">12.2.2.</span> <span class="toc-text">5. 装饰器</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/cn/44363/" title="python2"><img src= "/img/Loading.png" data-lazy-src="/gallery/sacilave/cuties/Lave_CutieDogs.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="python2"/></a><div class="content"><a class="title" href="/cn/44363/" title="python2">python2</a><time datetime="2025-04-11T23:58:04.000Z" title="Updated 2025-04-12 07:58:04">2025-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/cn/5613/" title="pythonRevive"><img src= "/img/Loading.png" data-lazy-src="/gallery/tomosaki_TimeTravel.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="pythonRevive"/></a><div class="content"><a class="title" href="/cn/5613/" title="pythonRevive">pythonRevive</a><time datetime="2025-04-11T16:19:10.000Z" title="Updated 2025-04-12 00:19:10">2025-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/cn/22493/" title="Python 康复训练"><img src= "/img/Loading.png" data-lazy-src="https://www.python.org/static/img/python-logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python 康复训练"/></a><div class="content"><a class="title" href="/cn/22493/" title="Python 康复训练">Python 康复训练</a><time datetime="2025-03-06T03:47:08.000Z" title="Updated 2025-03-06 11:47:08">2025-03-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/cn/46722/" title="五人定律的闲谈 - 更新中"><img src= "/img/Loading.png" data-lazy-src="/gallery/tomosaki_AfterClass.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="五人定律的闲谈 - 更新中"/></a><div class="content"><a class="title" href="/cn/46722/" title="五人定律的闲谈 - 更新中">五人定律的闲谈 - 更新中</a><time datetime="2025-01-23T18:07:01.000Z" title="Updated 2025-01-24 02:07:01">2025-01-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/cn/33368/" title="C# 中传参关键字 ref 和 out 笔记"><img src= "/img/Loading.png" data-lazy-src="https://www.jetbrains.com/guide/assets/csharp-logo-265a149e.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C# 中传参关键字 ref 和 out 笔记"/></a><div class="content"><a class="title" href="/cn/33368/" title="C# 中传参关键字 ref 和 out 笔记">C# 中传参关键字 ref 和 out 笔记</a><time datetime="2025-01-15T08:46:29.000Z" title="Updated 2025-01-15 16:46:29">2025-01-15</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent;"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By Lave</div><div class="footer_custom_text">Wish u all the best ❤</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>(() => {
  const panguFn = () => {
    if (typeof pangu === 'object') pangu.autoSpacingPage()
    else {
      btf.getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
        .then(() => {
          pangu.autoSpacingPage()
        })
    }
  }

  const panguInit = () => {
    if (false){
      GLOBAL_CONFIG_SITE.isPost && panguFn()
    } else {
      panguFn()
    }
  }

  btf.addGlobalFn('pjaxComplete', panguInit, 'pangu')
  document.addEventListener('DOMContentLoaded', panguInit)
})()</script><div class="js-pjax"><script>(() => {
  const disqus_config = function () {
    this.page.url = 'http://lave.fun/cn/22493/'
    this.page.identifier = '/cn/22493/'
    this.page.title = 'Python 康复训练'
  }

  const disqusReset = () => {
    window.DISQUS && window.DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  btf.addGlobalFn('themeChange', disqusReset, 'disqus')

  const loadDisqus = () =>{
    if (window.DISQUS) disqusReset()
    else {
      const script = document.createElement('script')
      script.src = 'https://sacilave.disqus.com/embed.js'
      script.setAttribute('data-timestamp', +new Date())
      document.head.appendChild(script)
    }
  }

  const getCount = async() => {
    try {
      const eleGroup = document.querySelector('#post-meta .disqus-comment-count')
      if (!eleGroup) return
      const cleanedLinks = eleGroup.href.replace(/#post-comment$/, '')

      const res = await fetch(`https://disqus.com/api/3.0/threads/set.json?forum=sacilave&api_key=TvqBZmQi3EWmbZEvSbeGzwL32DNT4VRgl73gfZ3UDyFPbZ76HiqFi4FTX3FQ5nVL&thread:link=${cleanedLinks}`,{
        method: 'GET'
      })
      const result = await res.json()

      const count = result.response.length ? result.response[0].posts : 0
      eleGroup.textContent = count
    } catch (err) {
      console.error(err)
    }
  }

  if ('Disqus' === 'Disqus' || !false) {
    if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
    else {
      loadDisqus()
      GLOBAL_CONFIG_SITE.isPost && getCount()
    }
  } else {
    window.loadOtherComment = loadDisqus
  }
})()</script><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'sKkm0Gi7MK26SEaJ56AoMrc7-MdYXbMMI',
      appKey: 'eBgo9In4J7FRfpbhp65VzVVZ',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await btf.getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Disqus' === 'Valine' || !false) {
    if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script></div><script>window.newestComments = {
  changeContent: content => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[Image]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[Link]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[Code]') // replace code
    content = content.replace(/<code>.*?<\/code>/gi, '[Code]') // replace code      
    content = content.replace(/<[^>]+>/g, "") // remove html tag

    if (content.length > 150) {
      content = content.substring(0, 150) + '...'
    }
    return content
  },

  generateHtml: (array, ele) => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class="aside-list-item">'

        if (true && array[i].avatar) {
          const imgAttr = 'data-lazy-src'
          result += `<a href="${array[i].url}" class="thumbnail"><img ${imgAttr}="${array[i].avatar}" alt="${array[i].nick}"></a>`
        }

        result += `<div class="content">
        <a class="comment" href="${array[i].url}" title="${array[i].content}">${array[i].content}</a>
        <div class="name"><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += 'No comments'
    }

    ele.innerHTML = result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh(ele)
  },

  newestCommentInit: (name, getComment) => {
    const $dom = document.querySelector('#card-newest-comments .aside-list')
    if ($dom) {
      const data = btf.saveToLocal.get(name)
      if (data) {
        newestComments.generateHtml(JSON.parse(data), $dom)
      } else {
        getComment($dom)
      }
    }
  },

  run: (name, getComment) => {
    newestComments.newestCommentInit(name, getComment)
    btf.addGlobalFn('pjaxComplete', () => newestComments.newestCommentInit(name, getComment), name)
  }
}</script><script>window.addEventListener('load', () => {
  const keyName = 'disqus-newest-comments'
  const { changeContent, generateHtml, run } = window.newestComments

  const getComment = ele => {
    fetch('https://disqus.com/api/3.0/forums/listPosts.json?forum=sacilave&related=thread&limit=3&api_key=TvqBZmQi3EWmbZEvSbeGzwL32DNT4VRgl73gfZ3UDyFPbZ76HiqFi4FTX3FQ5nVL')
      .then(response => response.json())
      .then(data => {
        const disqusArray = data.response.map(item => {
          return {
            'avatar': item.author.avatar.cache,
            'content': changeContent(item.message),
            'nick': item.author.name,
            'url': item.url,
            'date': item.createdAt
          }
        })

        btf.saveToLocal.set(keyName, JSON.stringify(disqusArray), 10/(60*24))
        generateHtml(disqusArray, ele)
      }).catch(e => {
        console.error(e)
        ele.textContent= "Unable to retrieve comments, please check the configuration"
      })
  }

  run(keyName, getComment)
})</script><script src="/js/tagcanvas.js"></script><script src="/js/tagcloud.js"></script><script defer src="/js/cursor-effects.js"></script><script defer src="/js/loading.js"></script><script defer src="/js/transition.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = false;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="贴贴♡,揉揉♡,抱抱♡,捏捏♡,٩(๑&gt; ₃ &lt;)۶,(´•ω•)♡" data-fontsize="12px" data-random="true" async="async"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"]):not([href="/link/"]):not([href="/music/"]):not([href="/no-pjax/"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: true,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      pjax.loadUrl('/404')
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>